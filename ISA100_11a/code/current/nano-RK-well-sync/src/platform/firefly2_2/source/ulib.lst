   1               		.file	"ulib.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
 117               	.global	getc1
 119               	getc1:
 120               		.stabd	46,0,0
   1:../../../src/platform/firefly2_2/source/ulib.c **** /******************************************************************************
   2:../../../src/platform/firefly2_2/source/ulib.c **** *  Nano-RK, a real-time operating system for sensor networks.
   3:../../../src/platform/firefly2_2/source/ulib.c **** *  Copyright (C) 2007, Real-Time and Multimedia Lab, Carnegie Mellon University
   4:../../../src/platform/firefly2_2/source/ulib.c **** *  All rights reserved.
   5:../../../src/platform/firefly2_2/source/ulib.c **** *
   6:../../../src/platform/firefly2_2/source/ulib.c **** *  This is the Open Source Version of Nano-RK included as part of a Dual
   7:../../../src/platform/firefly2_2/source/ulib.c **** *  Licensing Model. If you are unsure which license to use please refer to:
   8:../../../src/platform/firefly2_2/source/ulib.c **** *  http://www.nanork.org/nano-RK/wiki/Licensing
   9:../../../src/platform/firefly2_2/source/ulib.c **** *
  10:../../../src/platform/firefly2_2/source/ulib.c **** *  This program is free software: you can redistribute it and/or modify
  11:../../../src/platform/firefly2_2/source/ulib.c **** *  it under the terms of the GNU General Public License as published by
  12:../../../src/platform/firefly2_2/source/ulib.c **** *  the Free Software Foundation, version 2.0 of the License.
  13:../../../src/platform/firefly2_2/source/ulib.c **** *
  14:../../../src/platform/firefly2_2/source/ulib.c **** *  This program is distributed in the hope that it will be useful,
  15:../../../src/platform/firefly2_2/source/ulib.c **** *  but WITHOUT ANY WARRANTY; without even the implied warranty of
  16:../../../src/platform/firefly2_2/source/ulib.c **** *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  17:../../../src/platform/firefly2_2/source/ulib.c **** *  GNU General Public License for more details.
  18:../../../src/platform/firefly2_2/source/ulib.c **** *
  19:../../../src/platform/firefly2_2/source/ulib.c **** *  You should have received a copy of the GNU General Public License
  20:../../../src/platform/firefly2_2/source/ulib.c **** *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
  21:../../../src/platform/firefly2_2/source/ulib.c **** *
  22:../../../src/platform/firefly2_2/source/ulib.c **** *  Contributing Authors (specific to this file):
  23:../../../src/platform/firefly2_2/source/ulib.c **** *  Anthony Rowe
  24:../../../src/platform/firefly2_2/source/ulib.c **** *  Nuno Pereira
  25:../../../src/platform/firefly2_2/source/ulib.c **** *  Zane Starr
  26:../../../src/platform/firefly2_2/source/ulib.c **** *******************************************************************************/
  27:../../../src/platform/firefly2_2/source/ulib.c **** 
  28:../../../src/platform/firefly2_2/source/ulib.c **** #include <include.h>
  29:../../../src/platform/firefly2_2/source/ulib.c **** #include <ulib.h>
  30:../../../src/platform/firefly2_2/source/ulib.c **** #include <stdio.h>
  31:../../../src/platform/firefly2_2/source/ulib.c **** #include <hal.h>
  32:../../../src/platform/firefly2_2/source/ulib.c **** #include <hal_firefly2_2.h>
  33:../../../src/platform/firefly2_2/source/ulib.c **** #include <avr/interrupt.h>
  34:../../../src/platform/firefly2_2/source/ulib.c **** #include <nrk_pin_define.h>
  35:../../../src/platform/firefly2_2/source/ulib.c **** #include <nrk_error.h>
  36:../../../src/platform/firefly2_2/source/ulib.c **** #include <nrk_events.h>
  37:../../../src/platform/firefly2_2/source/ulib.c **** 
  38:../../../src/platform/firefly2_2/source/ulib.c **** #ifdef NANORK
  39:../../../src/platform/firefly2_2/source/ulib.c **** #include <nrk_cfg.h>
  40:../../../src/platform/firefly2_2/source/ulib.c **** #endif
  41:../../../src/platform/firefly2_2/source/ulib.c **** 
  42:../../../src/platform/firefly2_2/source/ulib.c **** #ifdef NRK_UART_BUF
  43:../../../src/platform/firefly2_2/source/ulib.c **** #include <nrk_events.h>
  44:../../../src/platform/firefly2_2/source/ulib.c **** 
  45:../../../src/platform/firefly2_2/source/ulib.c **** #ifndef MAX_RX_UART_BUF
  46:../../../src/platform/firefly2_2/source/ulib.c **** #define MAX_RX_UART_BUF    16
  47:../../../src/platform/firefly2_2/source/ulib.c **** #endif
  48:../../../src/platform/firefly2_2/source/ulib.c **** 
  49:../../../src/platform/firefly2_2/source/ulib.c **** 
  50:../../../src/platform/firefly2_2/source/ulib.c **** uint8_t uart_rx_buf_start,uart_rx_buf_end;
  51:../../../src/platform/firefly2_2/source/ulib.c **** char uart_rx_buf[MAX_RX_UART_BUF];
  52:../../../src/platform/firefly2_2/source/ulib.c **** nrk_sig_t uart_rx_signal;
  53:../../../src/platform/firefly2_2/source/ulib.c **** 
  54:../../../src/platform/firefly2_2/source/ulib.c **** SIGNAL(USART1_RX_vect)
  55:../../../src/platform/firefly2_2/source/ulib.c **** {
  56:../../../src/platform/firefly2_2/source/ulib.c **** char c;
  57:../../../src/platform/firefly2_2/source/ulib.c **** uint8_t sig;
  58:../../../src/platform/firefly2_2/source/ulib.c **** //cli();
  59:../../../src/platform/firefly2_2/source/ulib.c **** DISABLE_UART1_RX_INT();
  60:../../../src/platform/firefly2_2/source/ulib.c ****    UART1_WAIT_AND_RECEIVE(c);
  61:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_buf[uart_rx_buf_end]=c;
  62:../../../src/platform/firefly2_2/source/ulib.c ****    //if(uart_rx_buf_end==uart_rx_buf_start) sig=1; else sig=0;
  63:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_buf_end++;
  64:../../../src/platform/firefly2_2/source/ulib.c ****    if(uart_rx_buf_end==MAX_RX_UART_BUF) uart_rx_buf_end=0;
  65:../../../src/platform/firefly2_2/source/ulib.c ****    nrk_event_signal(uart_rx_signal);
  66:../../../src/platform/firefly2_2/source/ulib.c **** CLEAR_UART1_RX_INT();
  67:../../../src/platform/firefly2_2/source/ulib.c **** ENABLE_UART1_RX_INT();
  68:../../../src/platform/firefly2_2/source/ulib.c **** //sei();
  69:../../../src/platform/firefly2_2/source/ulib.c **** }
  70:../../../src/platform/firefly2_2/source/ulib.c **** 
  71:../../../src/platform/firefly2_2/source/ulib.c **** char getc1()
  72:../../../src/platform/firefly2_2/source/ulib.c **** {
 122               	.LM0:
 123               	.LFBB1:
 124               	/* prologue: frame size=0 */
 125               	/* prologue end (size=0) */
  73:../../../src/platform/firefly2_2/source/ulib.c **** char tmp;
  74:../../../src/platform/firefly2_2/source/ulib.c **** 
  75:../../../src/platform/firefly2_2/source/ulib.c **** if(uart_rx_buf_start!=uart_rx_buf_end)
 127               	.LM1:
 128 0000 2091 0000 		lds r18,uart_rx_buf_start
 129 0004 8091 0000 		lds r24,uart_rx_buf_end
 130 0008 2817      		cp r18,r24
 131 000a 01F0      		breq .L9
  76:../../../src/platform/firefly2_2/source/ulib.c ****    {
  77:../../../src/platform/firefly2_2/source/ulib.c ****    tmp=uart_rx_buf[uart_rx_buf_start];
 133               	.LM2:
 134 000c E22F      		mov r30,r18
 135 000e FF27      		clr r31
 136 0010 E050      		subi r30,lo8(-(uart_rx_buf))
 137 0012 F040      		sbci r31,hi8(-(uart_rx_buf))
 138 0014 E081      		ld r30,Z
  78:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_buf_start++;
 140               	.LM3:
 141 0016 822F      		mov r24,r18
 142 0018 8F5F      		subi r24,lo8(-(1))
 143 001a 8093 0000 		sts uart_rx_buf_start,r24
  79:../../../src/platform/firefly2_2/source/ulib.c ****    if(uart_rx_buf_start==MAX_RX_UART_BUF) uart_rx_buf_start=0;
 145               	.LM4:
 146 001e 8031      		cpi r24,lo8(16)
 147 0020 01F4      		brne .L4
 148 0022 1092 0000 		sts uart_rx_buf_start,__zero_reg__
 149               	.L4:
  80:../../../src/platform/firefly2_2/source/ulib.c ****    return(tmp);
 151               	.LM5:
 152 0026 8E2F      		mov r24,r30
 153 0028 9927      		clr r25
 154 002a 0895      		ret
 155               	.L9:
  81:../../../src/platform/firefly2_2/source/ulib.c ****    }
  82:../../../src/platform/firefly2_2/source/ulib.c **** // if buffer empty, then we have to block for it
  83:../../../src/platform/firefly2_2/source/ulib.c **** UART1_WAIT_AND_RECEIVE(tmp);
 157               	.LM6:
 158 002c 8091 C800 		lds r24,200
 159 0030 87FF      		sbrs r24,7
 160 0032 00C0      		rjmp .L9
 161 0034 8091 C800 		lds r24,200
 162 0038 8F77      		andi r24,lo8(127)
 163 003a 8093 C800 		sts 200,r24
 164 003e 8091 CE00 		lds r24,206
  84:../../../src/platform/firefly2_2/source/ulib.c **** return tmp;
 166               	.LM7:
 167 0042 9927      		clr r25
  85:../../../src/platform/firefly2_2/source/ulib.c **** }
 169               	.LM8:
 170 0044 0895      		ret
 171               	/* epilogue: frame size=0 */
 172               	/* epilogue: noreturn */
 173               	/* epilogue end (size=0) */
 174               	/* function getc1 size 35 (35) */
 179               	.Lscope1:
 181               		.stabd	78,0,0
 184               	.global	nrk_uart_data_ready
 186               	nrk_uart_data_ready:
 187               		.stabd	46,0,0
  86:../../../src/platform/firefly2_2/source/ulib.c **** 
  87:../../../src/platform/firefly2_2/source/ulib.c **** uint8_t nrk_uart_data_ready(uint8_t uart_num)
  88:../../../src/platform/firefly2_2/source/ulib.c **** {
 189               	.LM9:
 190               	.LFBB2:
 191               	/* prologue: frame size=0 */
 192               	/* prologue end (size=0) */
  89:../../../src/platform/firefly2_2/source/ulib.c **** if(uart_num==0)
 194               	.LM10:
 195 0046 8823      		tst r24
 196 0048 01F4      		brne .L13
  90:../../../src/platform/firefly2_2/source/ulib.c ****         {
  91:../../../src/platform/firefly2_2/source/ulib.c ****         if( UCSR0A & BM(RXC0) ) return 1;
 198               	.LM11:
 199 004a 8091 C000 		lds r24,192
 200 004e 9927      		clr r25
 201 0050 87FD      		sbrc r24,7
 202 0052 9095      		com r25
 203 0054 8827      		clr r24
 204 0056 990F      		lsl r25
 205 0058 881F      		rol r24
 206 005a 9927      		clr r25
 207 005c 0895      		ret
 208               	.L13:
  92:../../../src/platform/firefly2_2/source/ulib.c ****         }
  93:../../../src/platform/firefly2_2/source/ulib.c **** if(uart_num==1)
 210               	.LM12:
 211 005e 8130      		cpi r24,lo8(1)
 212 0060 01F0      		breq .L17
 213 0062 80E0      		ldi r24,lo8(0)
 214 0064 90E0      		ldi r25,hi8(0)
 215 0066 0895      		ret
 216               	.L17:
 217 0068 20E0      		ldi r18,lo8(0)
 218 006a 30E0      		ldi r19,hi8(0)
 219 006c 9091 0000 		lds r25,uart_rx_buf_start
 220 0070 8091 0000 		lds r24,uart_rx_buf_end
 221 0074 9817      		cp r25,r24
 222 0076 01F0      		breq .L19
 223 0078 21E0      		ldi r18,lo8(1)
 224 007a 30E0      		ldi r19,hi8(1)
 225               	.L19:
 226 007c C901      		movw r24,r18
  94:../../../src/platform/firefly2_2/source/ulib.c **** 	{
  95:../../../src/platform/firefly2_2/source/ulib.c **** 	if(uart_rx_buf_start!=uart_rx_buf_end) return 1;
  96:../../../src/platform/firefly2_2/source/ulib.c **** 	}
  97:../../../src/platform/firefly2_2/source/ulib.c **** return 0;
  98:../../../src/platform/firefly2_2/source/ulib.c **** }
 228               	.LM13:
 229 007e 0895      		ret
 230               	/* epilogue: frame size=0 */
 231               	/* epilogue: noreturn */
 232               	/* epilogue end (size=0) */
 233               	/* function nrk_uart_data_ready size 29 (29) */
 235               	.Lscope2:
 237               		.stabd	78,0,0
 239               	.global	PORT_INIT
 241               	PORT_INIT:
 242               		.stabd	46,0,0
  99:../../../src/platform/firefly2_2/source/ulib.c **** 
 100:../../../src/platform/firefly2_2/source/ulib.c **** nrk_sig_t nrk_uart_rx_signal_get()
 101:../../../src/platform/firefly2_2/source/ulib.c **** {
 102:../../../src/platform/firefly2_2/source/ulib.c ****    if(uart_rx_signal==NRK_ERROR) nrk_error_add(NRK_SIGNAL_CREATE_ERROR);
 103:../../../src/platform/firefly2_2/source/ulib.c ****    return uart_rx_signal;
 104:../../../src/platform/firefly2_2/source/ulib.c **** }
 105:../../../src/platform/firefly2_2/source/ulib.c **** 
 106:../../../src/platform/firefly2_2/source/ulib.c **** #else
 107:../../../src/platform/firefly2_2/source/ulib.c **** 
 108:../../../src/platform/firefly2_2/source/ulib.c **** nrk_sig_t nrk_uart_rx_signal_get()
 109:../../../src/platform/firefly2_2/source/ulib.c **** {
 110:../../../src/platform/firefly2_2/source/ulib.c ****    return NRK_ERROR;
 111:../../../src/platform/firefly2_2/source/ulib.c **** }
 112:../../../src/platform/firefly2_2/source/ulib.c **** 
 113:../../../src/platform/firefly2_2/source/ulib.c **** 
 114:../../../src/platform/firefly2_2/source/ulib.c **** uint8_t nrk_uart_data_ready(uint8_t uart_num)
 115:../../../src/platform/firefly2_2/source/ulib.c **** {
 116:../../../src/platform/firefly2_2/source/ulib.c **** if(uart_num==1)
 117:../../../src/platform/firefly2_2/source/ulib.c ****         {
 118:../../../src/platform/firefly2_2/source/ulib.c ****         if( UCSR1A & BM(RXC1) ) return 1;
 119:../../../src/platform/firefly2_2/source/ulib.c ****         }
 120:../../../src/platform/firefly2_2/source/ulib.c **** if(uart_num==0)
 121:../../../src/platform/firefly2_2/source/ulib.c ****         {
 122:../../../src/platform/firefly2_2/source/ulib.c ****         if( UCSR0A & BM(RXC0) ) return 1;
 123:../../../src/platform/firefly2_2/source/ulib.c ****         }
 124:../../../src/platform/firefly2_2/source/ulib.c **** return 0;
 125:../../../src/platform/firefly2_2/source/ulib.c **** }
 126:../../../src/platform/firefly2_2/source/ulib.c **** 
 127:../../../src/platform/firefly2_2/source/ulib.c **** char getc1(void){
 128:../../../src/platform/firefly2_2/source/ulib.c ****         unsigned char tmp;
 129:../../../src/platform/firefly2_2/source/ulib.c ****         UART1_WAIT_AND_RECEIVE(tmp);
 130:../../../src/platform/firefly2_2/source/ulib.c ****         return tmp;
 131:../../../src/platform/firefly2_2/source/ulib.c **** }
 132:../../../src/platform/firefly2_2/source/ulib.c **** 
 133:../../../src/platform/firefly2_2/source/ulib.c **** #endif
 134:../../../src/platform/firefly2_2/source/ulib.c **** 
 135:../../../src/platform/firefly2_2/source/ulib.c **** void nrk_kprintf( const char *addr)
 136:../../../src/platform/firefly2_2/source/ulib.c **** {
 137:../../../src/platform/firefly2_2/source/ulib.c ****  char c;
 138:../../../src/platform/firefly2_2/source/ulib.c ****    while((c=pgm_read_byte(addr++)))
 139:../../../src/platform/firefly2_2/source/ulib.c ****         putchar(c);
 140:../../../src/platform/firefly2_2/source/ulib.c **** }
 141:../../../src/platform/firefly2_2/source/ulib.c **** 
 142:../../../src/platform/firefly2_2/source/ulib.c **** void nrk_setup_ports()
 143:../../../src/platform/firefly2_2/source/ulib.c **** {
 144:../../../src/platform/firefly2_2/source/ulib.c **** PORT_INIT();
 145:../../../src/platform/firefly2_2/source/ulib.c **** SPI_INIT();
 146:../../../src/platform/firefly2_2/source/ulib.c **** }
 147:../../../src/platform/firefly2_2/source/ulib.c **** 
 148:../../../src/platform/firefly2_2/source/ulib.c **** //---------------------------------------------------------------------------------------------
 149:../../../src/platform/firefly2_2/source/ulib.c **** // GPIO related definitions
 150:../../../src/platform/firefly2_2/source/ulib.c **** //---------------------------------------------------------------------------------------------
 151:../../../src/platform/firefly2_2/source/ulib.c **** // Define high-level nrk pins mappings to hardware pins and ports
 152:../../../src/platform/firefly2_2/source/ulib.c **** // This is used for nrk_gpio_... functions.
 153:../../../src/platform/firefly2_2/source/ulib.c **** // Raw GPIO mapping can be found in the nrk_pin_define.h file.
 154:../../../src/platform/firefly2_2/source/ulib.c **** //---------------------------------------------------------------------------------------------
 155:../../../src/platform/firefly2_2/source/ulib.c **** 
 156:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 157:../../../src/platform/firefly2_2/source/ulib.c **** // Port A
 158:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( DEBUG_0,DEBUG_0, NRK_PORTA )
 159:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( DEBUG_1,DEBUG_1, NRK_PORTA )
 160:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( BUTTON,BUTTON, NRK_PORTA )
 161:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 162:../../../src/platform/firefly2_2/source/ulib.c **** // Port B
 163:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( SPI_SS,SPI_SS, NRK_PORTB )
 164:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( SCK,SCK, NRK_PORTB )
 165:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( MOSI,MOSI, NRK_PORTB )
 166:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( MISO,MISO, NRK_PORTB )
 167:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( GPIO26,4, NRK_PORTB )
 168:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( MMC_11,5, NRK_PORTB )
 169:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( MMC_10,6, NRK_PORTB )
 170:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( MMC_9,7, NRK_PORTB )
 171:../../../src/platform/firefly2_2/source/ulib.c **** 
 172:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 173:../../../src/platform/firefly2_2/source/ulib.c **** // Port D
 174:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( DEBUG_2,DEBUG_2, NRK_PORTD )
 175:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( DEBUG_3,DEBUG_3, NRK_PORTD )
 176:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( UART1_RXD,UART1_RXD, NRK_PORTD )
 177:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( UART1_TXD,UART1_TXD, NRK_PORTD )
 178:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( CCA,CCA, NRK_PORTD )
 179:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( SFD,SFD, NRK_PORTD )
 180:../../../src/platform/firefly2_2/source/ulib.c **** 
 181:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 182:../../../src/platform/firefly2_2/source/ulib.c **** // Port E
 183:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( UART0_RXD,UART0_RXD, NRK_PORTE )
 184:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( UART0_TXD,UART0_TXD, NRK_PORTE )
 185:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( LED_0,LED_0, NRK_PORTE )
 186:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( LED_1,LED_1, NRK_PORTE )
 187:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( LED_2,LED_2, NRK_PORTE )
 188:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( LED_3,LED_3, NRK_PORTE )
 189:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( GPIO34,GPIO34, NRK_PORTE )
 190:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( FIFOP, FIFOP, NRK_PORTE )
 191:../../../src/platform/firefly2_2/source/ulib.c **** 
 192:../../../src/platform/firefly2_2/source/ulib.c **** 
 193:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 194:../../../src/platform/firefly2_2/source/ulib.c **** // Port F
 195:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_0, ADC_INPUT_0, NRK_PORTF )
 196:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_1, ADC_INPUT_1, NRK_PORTF )
 197:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_2, ADC_INPUT_2, NRK_PORTF )
 198:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_3, ADC_INPUT_3, NRK_PORTF )
 199:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_4, ADC_INPUT_4, NRK_PORTF )
 200:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_5, ADC_INPUT_5, NRK_PORTF )
 201:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_6, ADC_INPUT_6, NRK_PORTF )
 202:../../../src/platform/firefly2_2/source/ulib.c **** NRK_PIN( ADC_INPUT_7, ADC_INPUT_7, NRK_PORTF )
 203:../../../src/platform/firefly2_2/source/ulib.c **** 
 204:../../../src/platform/firefly2_2/source/ulib.c **** void PORT_INIT(void)
 205:../../../src/platform/firefly2_2/source/ulib.c **** {
 244               	.LM14:
 245               	.LFBB3:
 246               	/* prologue: frame size=0 */
 247               	/* prologue end (size=0) */
 206:../../../src/platform/firefly2_2/source/ulib.c ****         MCUCR |= BM(PUD); 
 249               	.LM15:
 250 0080 85B7      		in r24,85-0x20
 251 0082 8061      		ori r24,lo8(16)
 252 0084 85BF      		out 85-0x20,r24
 207:../../../src/platform/firefly2_2/source/ulib.c ****         DDRB  = BM(MOSI) | BM(SCK);  
 254               	.LM16:
 255 0086 86E0      		ldi r24,lo8(6)
 256 0088 84B9      		out 36-0x20,r24
 208:../../../src/platform/firefly2_2/source/ulib.c ****         PORTB = BM(MOSI) | BM(SCK) | BM(SPI_SS); 
 258               	.LM17:
 259 008a 87E0      		ldi r24,lo8(7)
 260 008c 85B9      		out 37-0x20,r24
 209:../../../src/platform/firefly2_2/source/ulib.c ****         DDRC  = BM(CSN); 
 262               	.LM18:
 263 008e 81E0      		ldi r24,lo8(1)
 264 0090 87B9      		out 39-0x20,r24
 210:../../../src/platform/firefly2_2/source/ulib.c ****         PORTC = BM(CSN); 
 266               	.LM19:
 267 0092 88B9      		out 40-0x20,r24
 211:../../../src/platform/firefly2_2/source/ulib.c ****         DDRE  = BM(LED_0) | BM(LED_1) | BM(LED_2) | BM(LED_3); 
 269               	.LM20:
 270 0094 8CE3      		ldi r24,lo8(60)
 271 0096 8DB9      		out 45-0x20,r24
 212:../../../src/platform/firefly2_2/source/ulib.c ****         DDRD  = BM(UART1_TXD) | BM(DEBUG_2) | BM(DEBUG_3); 
 273               	.LM21:
 274 0098 8BE0      		ldi r24,lo8(11)
 275 009a 8AB9      		out 42-0x20,r24
 213:../../../src/platform/firefly2_2/source/ulib.c ****         PORTE  = BM(UART0_TXD) | BM(LED_0) | BM(LED_1) | BM(LED_2) | BM(LED_3); 
 277               	.LM22:
 278 009c 8EE3      		ldi r24,lo8(62)
 279 009e 8EB9      		out 46-0x20,r24
 214:../../../src/platform/firefly2_2/source/ulib.c ****         DDRA  = BM(VREG_EN) | BM(RESET_N) | BM(DEBUG_0) | BM(DEBUG_1); 
 281               	.LM23:
 282 00a0 88E7      		ldi r24,lo8(120)
 283 00a2 81B9      		out 33-0x20,r24
 215:../../../src/platform/firefly2_2/source/ulib.c ****         PORTA = BM(RESET_N); 
 285               	.LM24:
 286 00a4 80E4      		ldi r24,lo8(64)
 287 00a6 82B9      		out 34-0x20,r24
 216:../../../src/platform/firefly2_2/source/ulib.c ****         DDRF = 0xFF;
 289               	.LM25:
 290 00a8 8FEF      		ldi r24,lo8(-1)
 291 00aa 80BB      		out 48-0x20,r24
 292               	/* epilogue: frame size=0 */
 293 00ac 0895      		ret
 294               	/* epilogue end (size=1) */
 295               	/* function PORT_INIT size 23 (22) */
 297               	.Lscope3:
 299               		.stabd	78,0,0
 301               	.global	nrk_setup_ports
 303               	nrk_setup_ports:
 304               		.stabd	46,0,0
 306               	.LM26:
 307               	.LFBB4:
 308               	/* prologue: frame size=0 */
 309               	/* prologue end (size=0) */
 311               	.LM27:
 312 00ae 0E94 0000 		call PORT_INIT
 314               	.LM28:
 315 00b2 80E5      		ldi r24,lo8(80)
 316 00b4 8CBD      		out 76-0x20,r24
 317 00b6 81E0      		ldi r24,lo8(1)
 318 00b8 8DBD      		out 77-0x20,r24
 319               	/* epilogue: frame size=0 */
 320 00ba 0895      		ret
 321               	/* epilogue end (size=1) */
 322               	/* function nrk_setup_ports size 7 (6) */
 324               	.Lscope4:
 326               		.stabd	78,0,0
 329               	.global	nrk_gpio_set
 331               	nrk_gpio_set:
 332               		.stabd	46,0,0
 217:../../../src/platform/firefly2_2/source/ulib.c **** 
 218:../../../src/platform/firefly2_2/source/ulib.c **** } 
 219:../../../src/platform/firefly2_2/source/ulib.c **** 
 220:../../../src/platform/firefly2_2/source/ulib.c **** 
 221:../../../src/platform/firefly2_2/source/ulib.c **** 
 222:../../../src/platform/firefly2_2/source/ulib.c **** //-------------------------------
 223:../../../src/platform/firefly2_2/source/ulib.c **** // GPIO handling functions
 224:../../../src/platform/firefly2_2/source/ulib.c **** 
 225:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_set(uint8_t pin)
 226:../../../src/platform/firefly2_2/source/ulib.c **** {
 334               	.LM29:
 335               	.LFBB5:
 336               	/* prologue: frame size=0 */
 337               	/* prologue end (size=0) */
 227:../../../src/platform/firefly2_2/source/ulib.c ****         if (pin == NRK_INVALID_PIN_VAL) return -1;
 339               	.LM30:
 340 00bc 8F3F      		cpi r24,lo8(-1)
 341 00be 01F4      		brne .+2
 342 00c0 00C0      		rjmp .L26
 228:../../../src/platform/firefly2_2/source/ulib.c **** 
 229:../../../src/platform/firefly2_2/source/ulib.c ****         switch (pin & 0x07) {
 344               	.LM31:
 345 00c2 482F      		mov r20,r24
 346 00c4 5527      		clr r21
 347 00c6 9A01      		movw r18,r20
 348 00c8 2770      		andi r18,lo8(7)
 349 00ca 3070      		andi r19,hi8(7)
 350 00cc 2230      		cpi r18,2
 351 00ce 3105      		cpc r19,__zero_reg__
 352 00d0 01F0      		breq .L30
 353 00d2 2330      		cpi r18,3
 354 00d4 3105      		cpc r19,__zero_reg__
 355 00d6 04F4      		brge .L34
 356 00d8 2115      		cp r18,__zero_reg__
 357 00da 3105      		cpc r19,__zero_reg__
 358 00dc 01F0      		breq .L28
 359 00de 2130      		cpi r18,1
 360 00e0 3105      		cpc r19,__zero_reg__
 361 00e2 01F0      		breq .+2
 362 00e4 00C0      		rjmp .L26
 363 00e6 00C0      		rjmp .L29
 364               	.L34:
 365 00e8 2430      		cpi r18,4
 366 00ea 3105      		cpc r19,__zero_reg__
 367 00ec 01F4      		brne .+2
 368 00ee 00C0      		rjmp .L32
 369 00f0 2430      		cpi r18,4
 370 00f2 3105      		cpc r19,__zero_reg__
 371 00f4 04F0      		brlt .L31
 372 00f6 2530      		cpi r18,5
 373 00f8 3105      		cpc r19,__zero_reg__
 374 00fa 01F0      		breq .+2
 375 00fc 00C0      		rjmp .L26
 376 00fe 00C0      		rjmp .L33
 377               	.L28:
 230:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTA:
 231:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTA |= BM((pin & 0xF8) >> 3); } while(0); break; 
 379               	.LM32:
 380 0100 22B1      		in r18,34-0x20
 381 0102 A3E0      		ldi r26,3
 382 0104 5695      	1:	lsr r21
 383 0106 4795      		ror r20
 384 0108 AA95      		dec r26
 385 010a 01F4      		brne 1b
 386 010c 81E0      		ldi r24,lo8(1)
 387 010e 90E0      		ldi r25,hi8(1)
 388 0110 00C0      		rjmp 2f
 389 0112 880F      	1:	lsl r24
 390 0114 991F      		rol r25
 391 0116 4A95      	2:	dec r20
 392 0118 02F4      		brpl 1b
 393 011a 282B      		or r18,r24
 394 011c 22B9      		out 34-0x20,r18
 395 011e 00C0      		rjmp .L37
 396               	.L29:
 232:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTB:
 233:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTB |= BM((pin & 0xF8) >> 3); } while(0); break; 
 398               	.LM33:
 399 0120 85B1      		in r24,37-0x20
 400 0122 F3E0      		ldi r31,3
 401 0124 5695      	1:	lsr r21
 402 0126 4795      		ror r20
 403 0128 FA95      		dec r31
 404 012a 01F4      		brne 1b
 405 012c 00C0      		rjmp 2f
 406 012e 220F      	1:	lsl r18
 407 0130 331F      		rol r19
 408 0132 4A95      	2:	dec r20
 409 0134 02F4      		brpl 1b
 410 0136 822B      		or r24,r18
 411 0138 85B9      		out 37-0x20,r24
 412 013a 00C0      		rjmp .L37
 413               	.L30:
 234:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTC:
 235:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTC |= BM((pin & 0xF8) >> 3); } while(0); break; 
 415               	.LM34:
 416 013c 28B1      		in r18,40-0x20
 417 013e E3E0      		ldi r30,3
 418 0140 5695      	1:	lsr r21
 419 0142 4795      		ror r20
 420 0144 EA95      		dec r30
 421 0146 01F4      		brne 1b
 422 0148 81E0      		ldi r24,lo8(1)
 423 014a 90E0      		ldi r25,hi8(1)
 424 014c 00C0      		rjmp 2f
 425 014e 880F      	1:	lsl r24
 426 0150 991F      		rol r25
 427 0152 4A95      	2:	dec r20
 428 0154 02F4      		brpl 1b
 429 0156 282B      		or r18,r24
 430 0158 28B9      		out 40-0x20,r18
 431 015a 00C0      		rjmp .L37
 432               	.L31:
 236:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTD:
 237:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTD |= BM((pin & 0xF8) >> 3); } while(0); break; 
 434               	.LM35:
 435 015c 2BB1      		in r18,43-0x20
 436 015e 73E0      		ldi r23,3
 437 0160 5695      	1:	lsr r21
 438 0162 4795      		ror r20
 439 0164 7A95      		dec r23
 440 0166 01F4      		brne 1b
 441 0168 81E0      		ldi r24,lo8(1)
 442 016a 90E0      		ldi r25,hi8(1)
 443 016c 00C0      		rjmp 2f
 444 016e 880F      	1:	lsl r24
 445 0170 991F      		rol r25
 446 0172 4A95      	2:	dec r20
 447 0174 02F4      		brpl 1b
 448 0176 282B      		or r18,r24
 449 0178 2BB9      		out 43-0x20,r18
 450 017a 00C0      		rjmp .L37
 451               	.L32:
 238:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTE:
 239:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTE |= BM((pin & 0xF8) >> 3); } while(0); break; 
 453               	.LM36:
 454 017c 2EB1      		in r18,46-0x20
 455 017e 63E0      		ldi r22,3
 456 0180 5695      	1:	lsr r21
 457 0182 4795      		ror r20
 458 0184 6A95      		dec r22
 459 0186 01F4      		brne 1b
 460 0188 81E0      		ldi r24,lo8(1)
 461 018a 90E0      		ldi r25,hi8(1)
 462 018c 00C0      		rjmp 2f
 463 018e 880F      	1:	lsl r24
 464 0190 991F      		rol r25
 465 0192 4A95      	2:	dec r20
 466 0194 02F4      		brpl 1b
 467 0196 282B      		or r18,r24
 468 0198 2EB9      		out 46-0x20,r18
 469 019a 00C0      		rjmp .L37
 470               	.L33:
 240:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTF:
 241:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTF |= BM((pin & 0xF8) >> 3); } while(0); break;
 472               	.LM37:
 473 019c 21B3      		in r18,49-0x20
 474 019e 33E0      		ldi r19,3
 475 01a0 5695      	1:	lsr r21
 476 01a2 4795      		ror r20
 477 01a4 3A95      		dec r19
 478 01a6 01F4      		brne 1b
 479 01a8 81E0      		ldi r24,lo8(1)
 480 01aa 90E0      		ldi r25,hi8(1)
 481 01ac 00C0      		rjmp 2f
 482 01ae 880F      	1:	lsl r24
 483 01b0 991F      		rol r25
 484 01b2 4A95      	2:	dec r20
 485 01b4 02F4      		brpl 1b
 486 01b6 282B      		or r18,r24
 487 01b8 21BB      		out 49-0x20,r18
 488               	.L37:
 489 01ba 81E0      		ldi r24,lo8(1)
 490 01bc 90E0      		ldi r25,hi8(1)
 491 01be 0895      		ret
 492               	.L26:
 493 01c0 8FEF      		ldi r24,lo8(-1)
 494 01c2 9FEF      		ldi r25,hi8(-1)
 242:../../../src/platform/firefly2_2/source/ulib.c ****                 default: return -1;
 243:../../../src/platform/firefly2_2/source/ulib.c ****         }
 244:../../../src/platform/firefly2_2/source/ulib.c ****         return 1;
 245:../../../src/platform/firefly2_2/source/ulib.c **** }
 496               	.LM38:
 497 01c4 0895      		ret
 498               	/* epilogue: frame size=0 */
 499               	/* epilogue: noreturn */
 500               	/* epilogue end (size=0) */
 501               	/* function nrk_gpio_set size 139 (139) */
 503               	.Lscope5:
 505               		.stabd	78,0,0
 508               	.global	nrk_gpio_clr
 510               	nrk_gpio_clr:
 511               		.stabd	46,0,0
 246:../../../src/platform/firefly2_2/source/ulib.c **** 
 247:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_clr(uint8_t pin)
 248:../../../src/platform/firefly2_2/source/ulib.c **** {
 513               	.LM39:
 514               	.LFBB6:
 515               	/* prologue: frame size=0 */
 516               	/* prologue end (size=0) */
 249:../../../src/platform/firefly2_2/source/ulib.c ****         if (pin == NRK_INVALID_PIN_VAL) return -1;
 518               	.LM40:
 519 01c6 8F3F      		cpi r24,lo8(-1)
 520 01c8 01F4      		brne .+2
 521 01ca 00C0      		rjmp .L39
 250:../../../src/platform/firefly2_2/source/ulib.c ****         switch (pin & 0x07) {
 523               	.LM41:
 524 01cc 482F      		mov r20,r24
 525 01ce 5527      		clr r21
 526 01d0 9A01      		movw r18,r20
 527 01d2 2770      		andi r18,lo8(7)
 528 01d4 3070      		andi r19,hi8(7)
 529 01d6 2230      		cpi r18,2
 530 01d8 3105      		cpc r19,__zero_reg__
 531 01da 01F0      		breq .L43
 532 01dc 2330      		cpi r18,3
 533 01de 3105      		cpc r19,__zero_reg__
 534 01e0 04F4      		brge .L47
 535 01e2 2115      		cp r18,__zero_reg__
 536 01e4 3105      		cpc r19,__zero_reg__
 537 01e6 01F0      		breq .L41
 538 01e8 2130      		cpi r18,1
 539 01ea 3105      		cpc r19,__zero_reg__
 540 01ec 01F0      		breq .+2
 541 01ee 00C0      		rjmp .L39
 542 01f0 00C0      		rjmp .L42
 543               	.L47:
 544 01f2 2430      		cpi r18,4
 545 01f4 3105      		cpc r19,__zero_reg__
 546 01f6 01F4      		brne .+2
 547 01f8 00C0      		rjmp .L45
 548 01fa 2430      		cpi r18,4
 549 01fc 3105      		cpc r19,__zero_reg__
 550 01fe 04F0      		brlt .L44
 551 0200 2530      		cpi r18,5
 552 0202 3105      		cpc r19,__zero_reg__
 553 0204 01F0      		breq .+2
 554 0206 00C0      		rjmp .L39
 555 0208 00C0      		rjmp .L46
 556               	.L41:
 251:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTA:
 252:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTA &= ~BM((pin & 0xF8) >> 3); } while(0); break;
 558               	.LM42:
 559 020a 22B1      		in r18,34-0x20
 560 020c 73E0      		ldi r23,3
 561 020e 5695      	1:	lsr r21
 562 0210 4795      		ror r20
 563 0212 7A95      		dec r23
 564 0214 01F4      		brne 1b
 565 0216 81E0      		ldi r24,lo8(1)
 566 0218 90E0      		ldi r25,hi8(1)
 567 021a 00C0      		rjmp 2f
 568 021c 880F      	1:	lsl r24
 569 021e 991F      		rol r25
 570 0220 4A95      	2:	dec r20
 571 0222 02F4      		brpl 1b
 572 0224 8095      		com r24
 573 0226 8223      		and r24,r18
 574 0228 82B9      		out 34-0x20,r24
 575 022a 00C0      		rjmp .L50
 576               	.L42:
 253:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTB:
 254:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTB &= ~BM((pin & 0xF8) >> 3); } while(0); break;
 578               	.LM43:
 579 022c 95B1      		in r25,37-0x20
 580 022e 63E0      		ldi r22,3
 581 0230 5695      	1:	lsr r21
 582 0232 4795      		ror r20
 583 0234 6A95      		dec r22
 584 0236 01F4      		brne 1b
 585 0238 00C0      		rjmp 2f
 586 023a 220F      	1:	lsl r18
 587 023c 331F      		rol r19
 588 023e 4A95      	2:	dec r20
 589 0240 02F4      		brpl 1b
 590 0242 822F      		mov r24,r18
 591 0244 8095      		com r24
 592 0246 8923      		and r24,r25
 593 0248 85B9      		out 37-0x20,r24
 594 024a 00C0      		rjmp .L50
 595               	.L43:
 255:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTC:
 256:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTC &= ~BM((pin & 0xF8) >> 3); } while(0); break; 
 597               	.LM44:
 598 024c 28B1      		in r18,40-0x20
 599 024e 33E0      		ldi r19,3
 600 0250 5695      	1:	lsr r21
 601 0252 4795      		ror r20
 602 0254 3A95      		dec r19
 603 0256 01F4      		brne 1b
 604 0258 81E0      		ldi r24,lo8(1)
 605 025a 90E0      		ldi r25,hi8(1)
 606 025c 00C0      		rjmp 2f
 607 025e 880F      	1:	lsl r24
 608 0260 991F      		rol r25
 609 0262 4A95      	2:	dec r20
 610 0264 02F4      		brpl 1b
 611 0266 8095      		com r24
 612 0268 8223      		and r24,r18
 613 026a 88B9      		out 40-0x20,r24
 614 026c 00C0      		rjmp .L50
 615               	.L44:
 257:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTD:
 258:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTD &= ~BM((pin & 0xF8) >> 3); } while(0); break; 
 617               	.LM45:
 618 026e 2BB1      		in r18,43-0x20
 619 0270 93E0      		ldi r25,3
 620 0272 5695      	1:	lsr r21
 621 0274 4795      		ror r20
 622 0276 9A95      		dec r25
 623 0278 01F4      		brne 1b
 624 027a 81E0      		ldi r24,lo8(1)
 625 027c 90E0      		ldi r25,hi8(1)
 626 027e 00C0      		rjmp 2f
 627 0280 880F      	1:	lsl r24
 628 0282 991F      		rol r25
 629 0284 4A95      	2:	dec r20
 630 0286 02F4      		brpl 1b
 631 0288 8095      		com r24
 632 028a 8223      		and r24,r18
 633 028c 8BB9      		out 43-0x20,r24
 634 028e 00C0      		rjmp .L50
 635               	.L45:
 259:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTE:
 260:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTE &= ~BM((pin & 0xF8) >> 3); } while(0); break; 
 637               	.LM46:
 638 0290 2EB1      		in r18,46-0x20
 639 0292 83E0      		ldi r24,3
 640 0294 5695      	1:	lsr r21
 641 0296 4795      		ror r20
 642 0298 8A95      		dec r24
 643 029a 01F4      		brne 1b
 644 029c 81E0      		ldi r24,lo8(1)
 645 029e 90E0      		ldi r25,hi8(1)
 646 02a0 00C0      		rjmp 2f
 647 02a2 880F      	1:	lsl r24
 648 02a4 991F      		rol r25
 649 02a6 4A95      	2:	dec r20
 650 02a8 02F4      		brpl 1b
 651 02aa 8095      		com r24
 652 02ac 8223      		and r24,r18
 653 02ae 8EB9      		out 46-0x20,r24
 654 02b0 00C0      		rjmp .L50
 655               	.L46:
 261:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTF:
 262:../../../src/platform/firefly2_2/source/ulib.c ****                         do { PORTF &= ~BM((pin & 0xF8) >> 3); } while(0); break; 
 657               	.LM47:
 658 02b2 21B3      		in r18,49-0x20
 659 02b4 B3E0      		ldi r27,3
 660 02b6 5695      	1:	lsr r21
 661 02b8 4795      		ror r20
 662 02ba BA95      		dec r27
 663 02bc 01F4      		brne 1b
 664 02be 81E0      		ldi r24,lo8(1)
 665 02c0 90E0      		ldi r25,hi8(1)
 666 02c2 00C0      		rjmp 2f
 667 02c4 880F      	1:	lsl r24
 668 02c6 991F      		rol r25
 669 02c8 4A95      	2:	dec r20
 670 02ca 02F4      		brpl 1b
 671 02cc 8095      		com r24
 672 02ce 8223      		and r24,r18
 673 02d0 81BB      		out 49-0x20,r24
 674               	.L50:
 675 02d2 81E0      		ldi r24,lo8(1)
 676 02d4 90E0      		ldi r25,hi8(1)
 677 02d6 0895      		ret
 678               	.L39:
 679 02d8 8FEF      		ldi r24,lo8(-1)
 680 02da 9FEF      		ldi r25,hi8(-1)
 263:../../../src/platform/firefly2_2/source/ulib.c ****                 default: return -1;
 264:../../../src/platform/firefly2_2/source/ulib.c ****         }
 265:../../../src/platform/firefly2_2/source/ulib.c ****         return 1;
 266:../../../src/platform/firefly2_2/source/ulib.c **** }
 682               	.LM48:
 683 02dc 0895      		ret
 684               	/* epilogue: frame size=0 */
 685               	/* epilogue: noreturn */
 686               	/* epilogue end (size=0) */
 687               	/* function nrk_gpio_clr size 146 (146) */
 689               	.Lscope6:
 691               		.stabd	78,0,0
 694               	.global	nrk_gpio_get
 696               	nrk_gpio_get:
 697               		.stabd	46,0,0
 267:../../../src/platform/firefly2_2/source/ulib.c **** 
 268:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_get(uint8_t pin)
 269:../../../src/platform/firefly2_2/source/ulib.c **** {
 699               	.LM49:
 700               	.LFBB7:
 701               	/* prologue: frame size=0 */
 702               	/* prologue end (size=0) */
 270:../../../src/platform/firefly2_2/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 704               	.LM50:
 705 02de 8F3F      		cpi r24,lo8(-1)
 706 02e0 01F0      		breq .L52
 271:../../../src/platform/firefly2_2/source/ulib.c ****         switch (pin & 0x07) {
 708               	.LM51:
 709 02e2 282F      		mov r18,r24
 710 02e4 3327      		clr r19
 711 02e6 C901      		movw r24,r18
 712 02e8 8770      		andi r24,lo8(7)
 713 02ea 9070      		andi r25,hi8(7)
 714 02ec 8230      		cpi r24,2
 715 02ee 9105      		cpc r25,__zero_reg__
 716 02f0 01F0      		breq .L56
 717 02f2 8330      		cpi r24,3
 718 02f4 9105      		cpc r25,__zero_reg__
 719 02f6 04F4      		brge .L60
 720 02f8 0097      		sbiw r24,0
 721 02fa 01F0      		breq .L54
 722 02fc 0197      		sbiw r24,1
 723 02fe 01F4      		brne .L52
 724 0300 00C0      		rjmp .L55
 725               	.L60:
 726 0302 8430      		cpi r24,4
 727 0304 9105      		cpc r25,__zero_reg__
 728 0306 01F0      		breq .L58
 729 0308 8430      		cpi r24,4
 730 030a 9105      		cpc r25,__zero_reg__
 731 030c 04F0      		brlt .L57
 732 030e 0597      		sbiw r24,5
 733 0310 01F4      		brne .L52
 734 0312 00C0      		rjmp .L59
 735               	.L54:
 272:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTA:
 273:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PINA & BM((pin & 0xF8) >> 3));
 737               	.LM52:
 738 0314 80B1      		in r24,32-0x20
 739 0316 00C0      		rjmp .L63
 740               	.L55:
 274:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTB:
 275:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PINB & BM((pin & 0xF8) >> 3));
 742               	.LM53:
 743 0318 83B1      		in r24,35-0x20
 744 031a 00C0      		rjmp .L63
 745               	.L56:
 276:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTC:
 277:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PINC & BM((pin & 0xF8) >> 3));
 747               	.LM54:
 748 031c 86B1      		in r24,38-0x20
 749 031e 00C0      		rjmp .L63
 750               	.L57:
 278:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTD:
 279:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PIND & BM((pin & 0xF8) >> 3));
 752               	.LM55:
 753 0320 89B1      		in r24,41-0x20
 754 0322 00C0      		rjmp .L63
 755               	.L58:
 280:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTE:
 281:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PINE & BM((pin & 0xF8) >> 3));
 757               	.LM56:
 758 0324 8CB1      		in r24,44-0x20
 759 0326 00C0      		rjmp .L63
 760               	.L59:
 282:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTF:
 283:../../../src/platform/firefly2_2/source/ulib.c ****                         return !!(PINF & BM((pin & 0xF8) >> 3));
 762               	.LM57:
 763 0328 8FB1      		in r24,47-0x20
 764               	.L63:
 765 032a 9927      		clr r25
 766 032c E3E0      		ldi r30,3
 767 032e 3695      	1:	lsr r19
 768 0330 2795      		ror r18
 769 0332 EA95      		dec r30
 770 0334 01F4      		brne 1b
 771 0336 00C0      		rjmp 2f
 772 0338 9595      	1:	asr r25
 773 033a 8795      		ror r24
 774 033c 2A95      	2:	dec r18
 775 033e 02F4      		brpl 1b
 776 0340 9927      		clr r25
 777 0342 87FD      		sbrc r24,7
 778 0344 9095      		com r25
 779 0346 8170      		andi r24,lo8(1)
 780 0348 9070      		andi r25,hi8(1)
 781 034a 0895      		ret
 782               	.L52:
 783 034c 8FEF      		ldi r24,lo8(-1)
 784 034e 9FEF      		ldi r25,hi8(-1)
 284:../../../src/platform/firefly2_2/source/ulib.c ****                 default: return -1;
 285:../../../src/platform/firefly2_2/source/ulib.c ****         }
 286:../../../src/platform/firefly2_2/source/ulib.c ****         return 1;
 287:../../../src/platform/firefly2_2/source/ulib.c **** }
 786               	.LM58:
 787 0350 0895      		ret
 788               	/* epilogue: frame size=0 */
 789               	/* epilogue: noreturn */
 790               	/* epilogue end (size=0) */
 791               	/* function nrk_gpio_get size 61 (61) */
 793               	.Lscope7:
 795               		.stabd	78,0,0
 798               	.global	nrk_gpio_toggle
 800               	nrk_gpio_toggle:
 801               		.stabd	46,0,0
 288:../../../src/platform/firefly2_2/source/ulib.c **** 
 289:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_toggle(uint8_t pin)
 290:../../../src/platform/firefly2_2/source/ulib.c **** {
 803               	.LM59:
 804               	.LFBB8:
 805               	/* prologue: frame size=0 */
 806               	/* prologue end (size=0) */
 291:../../../src/platform/firefly2_2/source/ulib.c ****     if (pin == NRK_INVALID_PIN_VAL) return -1;
 808               	.LM60:
 809 0352 8F3F      		cpi r24,lo8(-1)
 810 0354 01F4      		brne .+2
 811 0356 00C0      		rjmp .L65
 292:../../../src/platform/firefly2_2/source/ulib.c ****         switch (pin & 0x07) {
 813               	.LM61:
 814 0358 282F      		mov r18,r24
 815 035a 3327      		clr r19
 816 035c A901      		movw r20,r18
 817 035e 4770      		andi r20,lo8(7)
 818 0360 5070      		andi r21,hi8(7)
 819 0362 4230      		cpi r20,2
 820 0364 5105      		cpc r21,__zero_reg__
 821 0366 01F4      		brne .+2
 822 0368 00C0      		rjmp .L69
 823 036a 4330      		cpi r20,3
 824 036c 5105      		cpc r21,__zero_reg__
 825 036e 04F4      		brge .L73
 826 0370 4115      		cp r20,__zero_reg__
 827 0372 5105      		cpc r21,__zero_reg__
 828 0374 01F0      		breq .L67
 829 0376 4130      		cpi r20,1
 830 0378 5105      		cpc r21,__zero_reg__
 831 037a 01F0      		breq .+2
 832 037c 00C0      		rjmp .L65
 833 037e 00C0      		rjmp .L68
 834               	.L73:
 835 0380 4430      		cpi r20,4
 836 0382 5105      		cpc r21,__zero_reg__
 837 0384 01F4      		brne .+2
 838 0386 00C0      		rjmp .L71
 839 0388 4430      		cpi r20,4
 840 038a 5105      		cpc r21,__zero_reg__
 841 038c 04F4      		brge .+2
 842 038e 00C0      		rjmp .L70
 843 0390 4530      		cpi r20,5
 844 0392 5105      		cpc r21,__zero_reg__
 845 0394 01F0      		breq .+2
 846 0396 00C0      		rjmp .L65
 847 0398 00C0      		rjmp .L72
 848               	.L67:
 293:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTA:
 294:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PINA & BM((pin & 0xF8) >> 3)) == 0) {
 850               	.LM62:
 851 039a 80B1      		in r24,32-0x20
 852 039c A901      		movw r20,r18
 853 039e 73E0      		ldi r23,3
 854 03a0 5695      	1:	lsr r21
 855 03a2 4795      		ror r20
 856 03a4 7A95      		dec r23
 857 03a6 01F4      		brne 1b
 858 03a8 9927      		clr r25
 859 03aa 042E      		mov r0,r20
 860 03ac 00C0      		rjmp 2f
 861 03ae 9595      	1:	asr r25
 862 03b0 8795      		ror r24
 863 03b2 0A94      	2:	dec r0
 864 03b4 02F4      		brpl 1b
 865 03b6 80FD      		sbrc r24,0
 866 03b8 00C0      		rjmp .L74
 295:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTA |= BM((pin & 0xF8) >> 3); } while(0);
 868               	.LM63:
 869 03ba 22B1      		in r18,34-0x20
 870 03bc 81E0      		ldi r24,lo8(1)
 871 03be 90E0      		ldi r25,hi8(1)
 872 03c0 00C0      		rjmp 2f
 873 03c2 880F      	1:	lsl r24
 874 03c4 991F      		rol r25
 875 03c6 4A95      	2:	dec r20
 876 03c8 02F4      		brpl 1b
 877 03ca 282B      		or r18,r24
 878 03cc 22B9      		out 34-0x20,r18
 879 03ce 00C0      		rjmp .L88
 880               	.L74:
 296:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 297:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTA &= ~BM((pin & 0xF8) >> 3); } while(0);
 882               	.LM64:
 883 03d0 22B1      		in r18,34-0x20
 884 03d2 81E0      		ldi r24,lo8(1)
 885 03d4 90E0      		ldi r25,hi8(1)
 886 03d6 00C0      		rjmp 2f
 887 03d8 880F      	1:	lsl r24
 888 03da 991F      		rol r25
 889 03dc 4A95      	2:	dec r20
 890 03de 02F4      		brpl 1b
 891 03e0 8095      		com r24
 892 03e2 8223      		and r24,r18
 893 03e4 82B9      		out 34-0x20,r24
 894 03e6 00C0      		rjmp .L88
 895               	.L68:
 298:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 299:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 300:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTB:
 301:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PINB & BM((pin & 0xF8) >> 3)) == 0) {
 897               	.LM65:
 898 03e8 83B1      		in r24,35-0x20
 899 03ea 63E0      		ldi r22,3
 900 03ec 3695      	1:	lsr r19
 901 03ee 2795      		ror r18
 902 03f0 6A95      		dec r22
 903 03f2 01F4      		brne 1b
 904 03f4 9927      		clr r25
 905 03f6 022E      		mov r0,r18
 906 03f8 00C0      		rjmp 2f
 907 03fa 9595      	1:	asr r25
 908 03fc 8795      		ror r24
 909 03fe 0A94      	2:	dec r0
 910 0400 02F4      		brpl 1b
 911 0402 00C0      		rjmp 2f
 912 0404 440F      	1:	lsl r20
 913 0406 551F      		rol r21
 914 0408 2A95      	2:	dec r18
 915 040a 02F4      		brpl 1b
 916 040c 80FD      		sbrc r24,0
 917 040e 00C0      		rjmp .L77
 302:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTB |= BM((pin & 0xF8) >> 3); } while(0);
 919               	.LM66:
 920 0410 85B1      		in r24,37-0x20
 921 0412 842B      		or r24,r20
 922 0414 00C0      		rjmp .L89
 923               	.L77:
 303:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 304:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTB &= ~BM((pin & 0xF8) >> 3); } while(0);
 925               	.LM67:
 926 0416 95B1      		in r25,37-0x20
 927 0418 842F      		mov r24,r20
 928 041a 8095      		com r24
 929 041c 8923      		and r24,r25
 930               	.L89:
 931 041e 85B9      		out 37-0x20,r24
 932 0420 00C0      		rjmp .L88
 933               	.L69:
 305:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 306:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 307:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTC:
 308:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PINC & BM((pin & 0xF8) >> 3)) == 0) {
 935               	.LM68:
 936 0422 86B1      		in r24,38-0x20
 937 0424 A901      		movw r20,r18
 938 0426 93E0      		ldi r25,3
 939 0428 5695      	1:	lsr r21
 940 042a 4795      		ror r20
 941 042c 9A95      		dec r25
 942 042e 01F4      		brne 1b
 943 0430 9927      		clr r25
 944 0432 042E      		mov r0,r20
 945 0434 00C0      		rjmp 2f
 946 0436 9595      	1:	asr r25
 947 0438 8795      		ror r24
 948 043a 0A94      	2:	dec r0
 949 043c 02F4      		brpl 1b
 950 043e 80FD      		sbrc r24,0
 951 0440 00C0      		rjmp .L79
 309:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTC |= BM((pin & 0xF8) >> 3); } while(0);
 953               	.LM69:
 954 0442 28B1      		in r18,40-0x20
 955 0444 81E0      		ldi r24,lo8(1)
 956 0446 90E0      		ldi r25,hi8(1)
 957 0448 00C0      		rjmp 2f
 958 044a 880F      	1:	lsl r24
 959 044c 991F      		rol r25
 960 044e 4A95      	2:	dec r20
 961 0450 02F4      		brpl 1b
 962 0452 282B      		or r18,r24
 963 0454 28B9      		out 40-0x20,r18
 964 0456 00C0      		rjmp .L88
 965               	.L79:
 310:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 311:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTC &= ~BM((pin & 0xF8) >> 3); } while(0);
 967               	.LM70:
 968 0458 28B1      		in r18,40-0x20
 969 045a 81E0      		ldi r24,lo8(1)
 970 045c 90E0      		ldi r25,hi8(1)
 971 045e 00C0      		rjmp 2f
 972 0460 880F      	1:	lsl r24
 973 0462 991F      		rol r25
 974 0464 4A95      	2:	dec r20
 975 0466 02F4      		brpl 1b
 976 0468 8095      		com r24
 977 046a 8223      		and r24,r18
 978 046c 88B9      		out 40-0x20,r24
 979 046e 00C0      		rjmp .L88
 980               	.L70:
 312:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 313:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 314:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTD:
 315:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PIND & BM((pin & 0xF8) >> 3)) == 0) {
 982               	.LM71:
 983 0470 89B1      		in r24,41-0x20
 984 0472 A901      		movw r20,r18
 985 0474 B3E0      		ldi r27,3
 986 0476 5695      	1:	lsr r21
 987 0478 4795      		ror r20
 988 047a BA95      		dec r27
 989 047c 01F4      		brne 1b
 990 047e 9927      		clr r25
 991 0480 042E      		mov r0,r20
 992 0482 00C0      		rjmp 2f
 993 0484 9595      	1:	asr r25
 994 0486 8795      		ror r24
 995 0488 0A94      	2:	dec r0
 996 048a 02F4      		brpl 1b
 997 048c 80FD      		sbrc r24,0
 998 048e 00C0      		rjmp .L81
 316:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTD |= BM((pin & 0xF8) >> 3); } while(0);
 1000               	.LM72:
 1001 0490 2BB1      		in r18,43-0x20
 1002 0492 81E0      		ldi r24,lo8(1)
 1003 0494 90E0      		ldi r25,hi8(1)
 1004 0496 00C0      		rjmp 2f
 1005 0498 880F      	1:	lsl r24
 1006 049a 991F      		rol r25
 1007 049c 4A95      	2:	dec r20
 1008 049e 02F4      		brpl 1b
 1009 04a0 282B      		or r18,r24
 1010 04a2 2BB9      		out 43-0x20,r18
 1011 04a4 00C0      		rjmp .L88
 1012               	.L81:
 317:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 318:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTD &= ~BM((pin & 0xF8) >> 3); } while(0);
 1014               	.LM73:
 1015 04a6 2BB1      		in r18,43-0x20
 1016 04a8 81E0      		ldi r24,lo8(1)
 1017 04aa 90E0      		ldi r25,hi8(1)
 1018 04ac 00C0      		rjmp 2f
 1019 04ae 880F      	1:	lsl r24
 1020 04b0 991F      		rol r25
 1021 04b2 4A95      	2:	dec r20
 1022 04b4 02F4      		brpl 1b
 1023 04b6 8095      		com r24
 1024 04b8 8223      		and r24,r18
 1025 04ba 8BB9      		out 43-0x20,r24
 1026 04bc 00C0      		rjmp .L88
 1027               	.L71:
 319:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 320:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 321:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTE:
 322:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PINE & BM((pin & 0xF8) >> 3)) == 0) {
 1029               	.LM74:
 1030 04be 8CB1      		in r24,44-0x20
 1031 04c0 A901      		movw r20,r18
 1032 04c2 A3E0      		ldi r26,3
 1033 04c4 5695      	1:	lsr r21
 1034 04c6 4795      		ror r20
 1035 04c8 AA95      		dec r26
 1036 04ca 01F4      		brne 1b
 1037 04cc 9927      		clr r25
 1038 04ce 042E      		mov r0,r20
 1039 04d0 00C0      		rjmp 2f
 1040 04d2 9595      	1:	asr r25
 1041 04d4 8795      		ror r24
 1042 04d6 0A94      	2:	dec r0
 1043 04d8 02F4      		brpl 1b
 1044 04da 80FD      		sbrc r24,0
 1045 04dc 00C0      		rjmp .L83
 323:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTE |= BM((pin & 0xF8) >> 3); } while(0);
 1047               	.LM75:
 1048 04de 2EB1      		in r18,46-0x20
 1049 04e0 81E0      		ldi r24,lo8(1)
 1050 04e2 90E0      		ldi r25,hi8(1)
 1051 04e4 00C0      		rjmp 2f
 1052 04e6 880F      	1:	lsl r24
 1053 04e8 991F      		rol r25
 1054 04ea 4A95      	2:	dec r20
 1055 04ec 02F4      		brpl 1b
 1056 04ee 282B      		or r18,r24
 1057 04f0 2EB9      		out 46-0x20,r18
 1058 04f2 00C0      		rjmp .L88
 1059               	.L83:
 324:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 325:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTE &= ~BM((pin & 0xF8) >> 3); } while(0);
 1061               	.LM76:
 1062 04f4 2EB1      		in r18,46-0x20
 1063 04f6 81E0      		ldi r24,lo8(1)
 1064 04f8 90E0      		ldi r25,hi8(1)
 1065 04fa 00C0      		rjmp 2f
 1066 04fc 880F      	1:	lsl r24
 1067 04fe 991F      		rol r25
 1068 0500 4A95      	2:	dec r20
 1069 0502 02F4      		brpl 1b
 1070 0504 8095      		com r24
 1071 0506 8223      		and r24,r18
 1072 0508 8EB9      		out 46-0x20,r24
 1073 050a 00C0      		rjmp .L88
 1074               	.L72:
 326:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 327:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 328:../../../src/platform/firefly2_2/source/ulib.c ****                 case NRK_PORTF:
 329:../../../src/platform/firefly2_2/source/ulib.c ****                         if ((PINF & BM((pin & 0xF8) >> 3)) == 0) {
 1076               	.LM77:
 1077 050c 8FB1      		in r24,47-0x20
 1078 050e A901      		movw r20,r18
 1079 0510 F3E0      		ldi r31,3
 1080 0512 5695      	1:	lsr r21
 1081 0514 4795      		ror r20
 1082 0516 FA95      		dec r31
 1083 0518 01F4      		brne 1b
 1084 051a 9927      		clr r25
 1085 051c 042E      		mov r0,r20
 1086 051e 00C0      		rjmp 2f
 1087 0520 9595      	1:	asr r25
 1088 0522 8795      		ror r24
 1089 0524 0A94      	2:	dec r0
 1090 0526 02F4      		brpl 1b
 1091 0528 80FD      		sbrc r24,0
 1092 052a 00C0      		rjmp .L85
 330:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTF |= BM((pin & 0xF8) >> 3); } while(0);
 1094               	.LM78:
 1095 052c 21B3      		in r18,49-0x20
 1096 052e 81E0      		ldi r24,lo8(1)
 1097 0530 90E0      		ldi r25,hi8(1)
 1098 0532 00C0      		rjmp 2f
 1099 0534 880F      	1:	lsl r24
 1100 0536 991F      		rol r25
 1101 0538 4A95      	2:	dec r20
 1102 053a 02F4      		brpl 1b
 1103 053c 282B      		or r18,r24
 1104 053e 21BB      		out 49-0x20,r18
 1105 0540 00C0      		rjmp .L88
 1106               	.L85:
 331:../../../src/platform/firefly2_2/source/ulib.c ****                         } else {
 332:../../../src/platform/firefly2_2/source/ulib.c ****                                 do { PORTF &= ~BM((pin & 0xF8) >> 3); } while(0);
 1108               	.LM79:
 1109 0542 21B3      		in r18,49-0x20
 1110 0544 81E0      		ldi r24,lo8(1)
 1111 0546 90E0      		ldi r25,hi8(1)
 1112 0548 00C0      		rjmp 2f
 1113 054a 880F      	1:	lsl r24
 1114 054c 991F      		rol r25
 1115 054e 4A95      	2:	dec r20
 1116 0550 02F4      		brpl 1b
 1117 0552 8095      		com r24
 1118 0554 8223      		and r24,r18
 1119 0556 81BB      		out 49-0x20,r24
 1120               	.L88:
 1121 0558 81E0      		ldi r24,lo8(1)
 1122 055a 90E0      		ldi r25,hi8(1)
 1123 055c 0895      		ret
 1124               	.L65:
 1125 055e 8FEF      		ldi r24,lo8(-1)
 1126 0560 9FEF      		ldi r25,hi8(-1)
 333:../../../src/platform/firefly2_2/source/ulib.c ****                         }
 334:../../../src/platform/firefly2_2/source/ulib.c ****                         break;
 335:../../../src/platform/firefly2_2/source/ulib.c ****                 default: return -1;
 336:../../../src/platform/firefly2_2/source/ulib.c ****         }
 337:../../../src/platform/firefly2_2/source/ulib.c ****         return 1;
 338:../../../src/platform/firefly2_2/source/ulib.c **** }
 1128               	.LM80:
 1129 0562 0895      		ret
 1130               	/* epilogue: frame size=0 */
 1131               	/* epilogue: noreturn */
 1132               	/* epilogue end (size=0) */
 1133               	/* function nrk_gpio_toggle size 276 (276) */
 1135               	.Lscope8:
 1137               		.stabd	78,0,0
 1141               	.global	nrk_gpio_direction
 1143               	nrk_gpio_direction:
 1144               		.stabd	46,0,0
 339:../../../src/platform/firefly2_2/source/ulib.c **** 
 340:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_direction(uint8_t pin, uint8_t pin_direction)
 341:../../../src/platform/firefly2_2/source/ulib.c **** {
 1146               	.LM81:
 1147               	.LFBB9:
 1148               	/* prologue: frame size=0 */
 1149               	/* prologue end (size=0) */
 342:../../../src/platform/firefly2_2/source/ulib.c ****         if (pin == NRK_INVALID_PIN_VAL) return -1;
 1151               	.LM82:
 1152 0564 8F3F      		cpi r24,lo8(-1)
 1153 0566 01F4      		brne .+2
 1154 0568 00C0      		rjmp .L91
 1155 056a 482F      		mov r20,r24
 1156 056c 5527      		clr r21
 343:../../../src/platform/firefly2_2/source/ulib.c ****         if (pin_direction == NRK_PIN_INPUT) {
 1158               	.LM83:
 1159 056e 6623      		tst r22
 1160 0570 01F0      		breq .+2
 1161 0572 00C0      		rjmp .L93
 344:../../../src/platform/firefly2_2/source/ulib.c ****                 switch (pin & 0x07) {
 1163               	.LM84:
 1164 0574 CA01      		movw r24,r20
 1165 0576 8770      		andi r24,lo8(7)
 1166 0578 9070      		andi r25,hi8(7)
 1167 057a 8230      		cpi r24,2
 1168 057c 9105      		cpc r25,__zero_reg__
 1169 057e 01F4      		brne .+2
 1170 0580 00C0      		rjmp .L97
 1171 0582 8330      		cpi r24,3
 1172 0584 9105      		cpc r25,__zero_reg__
 1173 0586 04F4      		brge .L101
 1174 0588 0097      		sbiw r24,0
 1175 058a 01F0      		breq .L95
 1176 058c 8130      		cpi r24,1
 1177 058e 9105      		cpc r25,__zero_reg__
 1178 0590 01F0      		breq .+2
 1179 0592 00C0      		rjmp .L91
 1180 0594 00C0      		rjmp .L96
 1181               	.L101:
 1182 0596 8430      		cpi r24,4
 1183 0598 9105      		cpc r25,__zero_reg__
 1184 059a 01F4      		brne .+2
 1185 059c 00C0      		rjmp .L99
 1186 059e 8430      		cpi r24,4
 1187 05a0 9105      		cpc r25,__zero_reg__
 1188 05a2 04F4      		brge .+2
 1189 05a4 00C0      		rjmp .L98
 1190 05a6 0597      		sbiw r24,5
 1191 05a8 01F0      		breq .+2
 1192 05aa 00C0      		rjmp .L91
 1193 05ac 00C0      		rjmp .L100
 1194               	.L95:
 345:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTA:
 346:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRA &= ~BM((pin & 0xF8) >> 3); 
 1196               	.LM85:
 1197 05ae 31B1      		in r19,33-0x20
 1198 05b0 B3E0      		ldi r27,3
 1199 05b2 5695      	1:	lsr r21
 1200 05b4 4795      		ror r20
 1201 05b6 BA95      		dec r27
 1202 05b8 01F4      		brne 1b
 1203 05ba 81E0      		ldi r24,lo8(1)
 1204 05bc 90E0      		ldi r25,hi8(1)
 1205 05be 00C0      		rjmp 2f
 1206 05c0 880F      	1:	lsl r24
 1207 05c2 991F      		rol r25
 1208 05c4 4A95      	2:	dec r20
 1209 05c6 02F4      		brpl 1b
 1210 05c8 282F      		mov r18,r24
 1211 05ca 2095      		com r18
 1212 05cc 2323      		and r18,r19
 1213 05ce 21B9      		out 33-0x20,r18
 347:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTA |= BM((pin & 0xF8) >> 3); 
 1215               	.LM86:
 1216 05d0 22B1      		in r18,34-0x20
 1217 05d2 822B      		or r24,r18
 1218 05d4 82B9      		out 34-0x20,r24
 1219 05d6 00C0      		rjmp .L111
 1220               	.L96:
 348:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 349:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTB:
 350:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRB &= ~BM((pin & 0xF8) >> 3); 
 1222               	.LM87:
 1223 05d8 24B1      		in r18,36-0x20
 1224 05da A3E0      		ldi r26,3
 1225 05dc 5695      	1:	lsr r21
 1226 05de 4795      		ror r20
 1227 05e0 AA95      		dec r26
 1228 05e2 01F4      		brne 1b
 1229 05e4 00C0      		rjmp 2f
 1230 05e6 880F      	1:	lsl r24
 1231 05e8 991F      		rol r25
 1232 05ea 4A95      	2:	dec r20
 1233 05ec 02F4      		brpl 1b
 1234 05ee 982F      		mov r25,r24
 1235 05f0 8095      		com r24
 1236 05f2 8223      		and r24,r18
 1237 05f4 84B9      		out 36-0x20,r24
 351:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTB |= BM((pin & 0xF8) >> 3); 
 1239               	.LM88:
 1240 05f6 85B1      		in r24,37-0x20
 1241 05f8 982B      		or r25,r24
 1242 05fa 95B9      		out 37-0x20,r25
 1243 05fc 00C0      		rjmp .L111
 1244               	.L97:
 352:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 353:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTC:
 354:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRC &= ~BM((pin & 0xF8) >> 3); 
 1246               	.LM89:
 1247 05fe 37B1      		in r19,39-0x20
 1248 0600 F3E0      		ldi r31,3
 1249 0602 5695      	1:	lsr r21
 1250 0604 4795      		ror r20
 1251 0606 FA95      		dec r31
 1252 0608 01F4      		brne 1b
 1253 060a 81E0      		ldi r24,lo8(1)
 1254 060c 90E0      		ldi r25,hi8(1)
 1255 060e 00C0      		rjmp 2f
 1256 0610 880F      	1:	lsl r24
 1257 0612 991F      		rol r25
 1258 0614 4A95      	2:	dec r20
 1259 0616 02F4      		brpl 1b
 1260 0618 282F      		mov r18,r24
 1261 061a 2095      		com r18
 1262 061c 2323      		and r18,r19
 1263 061e 27B9      		out 39-0x20,r18
 1264 0620 00C0      		rjmp .L112
 1265               	.L98:
 355:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTB |= BM((pin & 0xF8) >> 3); 
 356:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 357:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTD:
 358:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRD &= ~BM((pin & 0xF8) >> 3); 
 1267               	.LM90:
 1268 0622 3AB1      		in r19,42-0x20
 1269 0624 E3E0      		ldi r30,3
 1270 0626 5695      	1:	lsr r21
 1271 0628 4795      		ror r20
 1272 062a EA95      		dec r30
 1273 062c 01F4      		brne 1b
 1274 062e 81E0      		ldi r24,lo8(1)
 1275 0630 90E0      		ldi r25,hi8(1)
 1276 0632 00C0      		rjmp 2f
 1277 0634 880F      	1:	lsl r24
 1278 0636 991F      		rol r25
 1279 0638 4A95      	2:	dec r20
 1280 063a 02F4      		brpl 1b
 1281 063c 282F      		mov r18,r24
 1282 063e 2095      		com r18
 1283 0640 2323      		and r18,r19
 1284 0642 2AB9      		out 42-0x20,r18
 1285 0644 00C0      		rjmp .L112
 1286               	.L99:
 359:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTB |= BM((pin & 0xF8) >> 3); 
 360:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 361:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTE:
 362:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRE &= ~BM((pin & 0xF8) >> 3); 
 1288               	.LM91:
 1289 0646 3DB1      		in r19,45-0x20
 1290 0648 73E0      		ldi r23,3
 1291 064a 5695      	1:	lsr r21
 1292 064c 4795      		ror r20
 1293 064e 7A95      		dec r23
 1294 0650 01F4      		brne 1b
 1295 0652 81E0      		ldi r24,lo8(1)
 1296 0654 90E0      		ldi r25,hi8(1)
 1297 0656 00C0      		rjmp 2f
 1298 0658 880F      	1:	lsl r24
 1299 065a 991F      		rol r25
 1300 065c 4A95      	2:	dec r20
 1301 065e 02F4      		brpl 1b
 1302 0660 282F      		mov r18,r24
 1303 0662 2095      		com r18
 1304 0664 2323      		and r18,r19
 1305 0666 2DB9      		out 45-0x20,r18
 1306 0668 00C0      		rjmp .L112
 1307               	.L100:
 363:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTB |= BM((pin & 0xF8) >> 3); 
 364:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 365:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTF:
 366:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRF &= ~BM((pin & 0xF8) >> 3);
 1309               	.LM92:
 1310 066a 30B3      		in r19,48-0x20
 1311 066c 63E0      		ldi r22,3
 1312 066e 5695      	1:	lsr r21
 1313 0670 4795      		ror r20
 1314 0672 6A95      		dec r22
 1315 0674 01F4      		brne 1b
 1316 0676 81E0      		ldi r24,lo8(1)
 1317 0678 90E0      		ldi r25,hi8(1)
 1318 067a 00C0      		rjmp 2f
 1319 067c 880F      	1:	lsl r24
 1320 067e 991F      		rol r25
 1321 0680 4A95      	2:	dec r20
 1322 0682 02F4      		brpl 1b
 1323 0684 282F      		mov r18,r24
 1324 0686 2095      		com r18
 1325 0688 2323      		and r18,r19
 1326 068a 20BB      		out 48-0x20,r18
 1327               	.L112:
 367:../../../src/platform/firefly2_2/source/ulib.c ****                                 PORTB |= BM((pin & 0xF8) >> 3); 
 1329               	.LM93:
 1330 068c 25B1      		in r18,37-0x20
 1331 068e 822B      		or r24,r18
 1332 0690 85B9      		out 37-0x20,r24
 1333 0692 00C0      		rjmp .L111
 1334               	.L93:
 368:../../../src/platform/firefly2_2/source/ulib.c ****                                 break;
 369:../../../src/platform/firefly2_2/source/ulib.c ****                         default: return -1;
 370:../../../src/platform/firefly2_2/source/ulib.c ****                 }
 371:../../../src/platform/firefly2_2/source/ulib.c ****         } else {
 372:../../../src/platform/firefly2_2/source/ulib.c ****                 switch (pin & 0x07) {
 1336               	.LM94:
 1337 0694 9A01      		movw r18,r20
 1338 0696 2770      		andi r18,lo8(7)
 1339 0698 3070      		andi r19,hi8(7)
 1340 069a 2230      		cpi r18,2
 1341 069c 3105      		cpc r19,__zero_reg__
 1342 069e 01F0      		breq .L105
 1343 06a0 2330      		cpi r18,3
 1344 06a2 3105      		cpc r19,__zero_reg__
 1345 06a4 04F4      		brge .L109
 1346 06a6 2115      		cp r18,__zero_reg__
 1347 06a8 3105      		cpc r19,__zero_reg__
 1348 06aa 01F0      		breq .L103
 1349 06ac 2130      		cpi r18,1
 1350 06ae 3105      		cpc r19,__zero_reg__
 1351 06b0 01F0      		breq .+2
 1352 06b2 00C0      		rjmp .L91
 1353 06b4 00C0      		rjmp .L104
 1354               	.L109:
 1355 06b6 2430      		cpi r18,4
 1356 06b8 3105      		cpc r19,__zero_reg__
 1357 06ba 01F4      		brne .+2
 1358 06bc 00C0      		rjmp .L107
 1359 06be 2430      		cpi r18,4
 1360 06c0 3105      		cpc r19,__zero_reg__
 1361 06c2 04F0      		brlt .L106
 1362 06c4 2530      		cpi r18,5
 1363 06c6 3105      		cpc r19,__zero_reg__
 1364 06c8 01F0      		breq .+2
 1365 06ca 00C0      		rjmp .L91
 1366 06cc 00C0      		rjmp .L108
 1367               	.L103:
 373:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTA:
 374:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRA |= BM((pin & 0xF8) >> 3); break;
 1369               	.LM95:
 1370 06ce 21B1      		in r18,33-0x20
 1371 06d0 33E0      		ldi r19,3
 1372 06d2 5695      	1:	lsr r21
 1373 06d4 4795      		ror r20
 1374 06d6 3A95      		dec r19
 1375 06d8 01F4      		brne 1b
 1376 06da 81E0      		ldi r24,lo8(1)
 1377 06dc 90E0      		ldi r25,hi8(1)
 1378 06de 00C0      		rjmp 2f
 1379 06e0 880F      	1:	lsl r24
 1380 06e2 991F      		rol r25
 1381 06e4 4A95      	2:	dec r20
 1382 06e6 02F4      		brpl 1b
 1383 06e8 282B      		or r18,r24
 1384 06ea 21B9      		out 33-0x20,r18
 1385 06ec 00C0      		rjmp .L111
 1386               	.L104:
 375:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTB:
 376:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRB |= BM((pin & 0xF8) >> 3); break;
 1388               	.LM96:
 1389 06ee 84B1      		in r24,36-0x20
 1390 06f0 93E0      		ldi r25,3
 1391 06f2 5695      	1:	lsr r21
 1392 06f4 4795      		ror r20
 1393 06f6 9A95      		dec r25
 1394 06f8 01F4      		brne 1b
 1395 06fa 00C0      		rjmp 2f
 1396 06fc 220F      	1:	lsl r18
 1397 06fe 331F      		rol r19
 1398 0700 4A95      	2:	dec r20
 1399 0702 02F4      		brpl 1b
 1400 0704 822B      		or r24,r18
 1401 0706 84B9      		out 36-0x20,r24
 1402 0708 00C0      		rjmp .L111
 1403               	.L105:
 377:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTC:
 378:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRC |= BM((pin & 0xF8) >> 3); break;
 1405               	.LM97:
 1406 070a 27B1      		in r18,39-0x20
 1407 070c B3E0      		ldi r27,3
 1408 070e 5695      	1:	lsr r21
 1409 0710 4795      		ror r20
 1410 0712 BA95      		dec r27
 1411 0714 01F4      		brne 1b
 1412 0716 81E0      		ldi r24,lo8(1)
 1413 0718 90E0      		ldi r25,hi8(1)
 1414 071a 00C0      		rjmp 2f
 1415 071c 880F      	1:	lsl r24
 1416 071e 991F      		rol r25
 1417 0720 4A95      	2:	dec r20
 1418 0722 02F4      		brpl 1b
 1419 0724 282B      		or r18,r24
 1420 0726 27B9      		out 39-0x20,r18
 1421 0728 00C0      		rjmp .L111
 1422               	.L106:
 379:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTD:
 380:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRD |= BM((pin & 0xF8) >> 3); break;
 1424               	.LM98:
 1425 072a 2AB1      		in r18,42-0x20
 1426 072c A3E0      		ldi r26,3
 1427 072e 5695      	1:	lsr r21
 1428 0730 4795      		ror r20
 1429 0732 AA95      		dec r26
 1430 0734 01F4      		brne 1b
 1431 0736 81E0      		ldi r24,lo8(1)
 1432 0738 90E0      		ldi r25,hi8(1)
 1433 073a 00C0      		rjmp 2f
 1434 073c 880F      	1:	lsl r24
 1435 073e 991F      		rol r25
 1436 0740 4A95      	2:	dec r20
 1437 0742 02F4      		brpl 1b
 1438 0744 282B      		or r18,r24
 1439 0746 2AB9      		out 42-0x20,r18
 1440 0748 00C0      		rjmp .L111
 1441               	.L107:
 381:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTE:
 382:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRE |= BM((pin & 0xF8) >> 3); break;
 1443               	.LM99:
 1444 074a 2DB1      		in r18,45-0x20
 1445 074c F3E0      		ldi r31,3
 1446 074e 5695      	1:	lsr r21
 1447 0750 4795      		ror r20
 1448 0752 FA95      		dec r31
 1449 0754 01F4      		brne 1b
 1450 0756 81E0      		ldi r24,lo8(1)
 1451 0758 90E0      		ldi r25,hi8(1)
 1452 075a 00C0      		rjmp 2f
 1453 075c 880F      	1:	lsl r24
 1454 075e 991F      		rol r25
 1455 0760 4A95      	2:	dec r20
 1456 0762 02F4      		brpl 1b
 1457 0764 282B      		or r18,r24
 1458 0766 2DB9      		out 45-0x20,r18
 1459 0768 00C0      		rjmp .L111
 1460               	.L108:
 383:../../../src/platform/firefly2_2/source/ulib.c ****                         case NRK_PORTF:
 384:../../../src/platform/firefly2_2/source/ulib.c ****                                 DDRF |= BM((pin & 0xF8) >> 3); break;
 1462               	.LM100:
 1463 076a 20B3      		in r18,48-0x20
 1464 076c E3E0      		ldi r30,3
 1465 076e 5695      	1:	lsr r21
 1466 0770 4795      		ror r20
 1467 0772 EA95      		dec r30
 1468 0774 01F4      		brne 1b
 1469 0776 81E0      		ldi r24,lo8(1)
 1470 0778 90E0      		ldi r25,hi8(1)
 1471 077a 00C0      		rjmp 2f
 1472 077c 880F      	1:	lsl r24
 1473 077e 991F      		rol r25
 1474 0780 4A95      	2:	dec r20
 1475 0782 02F4      		brpl 1b
 1476 0784 282B      		or r18,r24
 1477 0786 20BB      		out 48-0x20,r18
 1478               	.L111:
 1479 0788 81E0      		ldi r24,lo8(1)
 1480 078a 90E0      		ldi r25,hi8(1)
 1481 078c 0895      		ret
 1482               	.L91:
 1483 078e 8FEF      		ldi r24,lo8(-1)
 1484 0790 9FEF      		ldi r25,hi8(-1)
 385:../../../src/platform/firefly2_2/source/ulib.c ****                         default: return -1;
 386:../../../src/platform/firefly2_2/source/ulib.c ****                 }
 387:../../../src/platform/firefly2_2/source/ulib.c ****         }
 388:../../../src/platform/firefly2_2/source/ulib.c ****         return 1;
 389:../../../src/platform/firefly2_2/source/ulib.c **** }
 1486               	.LM101:
 1487 0792 0895      		ret
 1488               	/* epilogue: frame size=0 */
 1489               	/* epilogue: noreturn */
 1490               	/* epilogue end (size=0) */
 1491               	/* function nrk_gpio_direction size 293 (293) */
 1493               	.Lscope9:
 1495               		.stabd	78,0,0
 1498               	.global	nrk_get_button
 1500               	nrk_get_button:
 1501               		.stabd	46,0,0
 390:../../../src/platform/firefly2_2/source/ulib.c **** 
 391:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_get_button(uint8_t b)
 392:../../../src/platform/firefly2_2/source/ulib.c **** {
 1503               	.LM102:
 1504               	.LFBB10:
 1505               	/* prologue: frame size=0 */
 1506               	/* prologue end (size=0) */
 393:../../../src/platform/firefly2_2/source/ulib.c **** if(b==0) {
 1508               	.LM103:
 1509 0794 8823      		tst r24
 1510 0796 01F0      		breq .L114
 1512               	.LM104:
 1513 0798 8FEF      		ldi r24,lo8(-1)
 1514 079a 9FEF      		ldi r25,hi8(-1)
 1515 079c 0895      		ret
 1516               	.L114:
 394:../../../src/platform/firefly2_2/source/ulib.c **** 	 return( !(PINA & BM(BUTTON))); 
 1518               	.LM105:
 1519 079e 80B1      		in r24,32-0x20
 1520 07a0 9927      		clr r25
 1521 07a2 87FD      		sbrc r24,7
 1522 07a4 9095      		com r25
 1523 07a6 8095      		com r24
 1524 07a8 9095      		com r25
 1525 07aa 8827      		clr r24
 1526 07ac 990F      		lsl r25
 1527 07ae 881F      		rol r24
 1528 07b0 9927      		clr r25
 395:../../../src/platform/firefly2_2/source/ulib.c **** 	} 
 396:../../../src/platform/firefly2_2/source/ulib.c **** return -1;
 397:../../../src/platform/firefly2_2/source/ulib.c **** }
 1530               	.LM106:
 1531 07b2 0895      		ret
 1532               	/* epilogue: frame size=0 */
 1533               	/* epilogue: noreturn */
 1534               	/* epilogue end (size=0) */
 1535               	/* function nrk_get_button size 16 (16) */
 1537               	.Lscope10:
 1539               		.stabd	78,0,0
 1542               	.global	nrk_led_toggle
 1544               	nrk_led_toggle:
 1545               		.stabd	46,0,0
 398:../../../src/platform/firefly2_2/source/ulib.c **** 
 399:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_led_toggle( int led )
 400:../../../src/platform/firefly2_2/source/ulib.c **** {
 1547               	.LM107:
 1548               	.LFBB11:
 1549               	/* prologue: frame size=0 */
 1550               	/* prologue end (size=0) */
 401:../../../src/platform/firefly2_2/source/ulib.c **** if(led==0) { nrk_gpio_toggle(NRK_LED_0); return 1; }
 1552               	.LM108:
 1553 07b4 0097      		sbiw r24,0
 1554 07b6 01F4      		brne .L120
 1556               	.LM109:
 1557 07b8 84E1      		ldi r24,lo8(20)
 1558 07ba 00C0      		rjmp .L130
 1559               	.L120:
 402:../../../src/platform/firefly2_2/source/ulib.c **** if(led==1) { nrk_gpio_toggle(NRK_LED_1); return 1; }
 1561               	.LM110:
 1562 07bc 8130      		cpi r24,1
 1563 07be 9105      		cpc r25,__zero_reg__
 1564 07c0 01F4      		brne .L123
 1565 07c2 8CE1      		ldi r24,lo8(28)
 1566 07c4 00C0      		rjmp .L130
 1567               	.L123:
 403:../../../src/platform/firefly2_2/source/ulib.c **** if(led==2) { nrk_gpio_toggle(NRK_LED_2); return 1; }
 1569               	.LM111:
 1570 07c6 8230      		cpi r24,2
 1571 07c8 9105      		cpc r25,__zero_reg__
 1572 07ca 01F4      		brne .L125
 1573 07cc 84E2      		ldi r24,lo8(36)
 1574               	.L130:
 1575 07ce 0E94 0000 		call nrk_gpio_toggle
 1576 07d2 81E0      		ldi r24,lo8(1)
 1577 07d4 90E0      		ldi r25,hi8(1)
 1578 07d6 0895      		ret
 1579               	.L125:
 404:../../../src/platform/firefly2_2/source/ulib.c **** if(led==3) { nrk_gpio_toggle(NRK_LED_3); return 1; }
 1581               	.LM112:
 1582 07d8 0397      		sbiw r24,3
 1583 07da 01F0      		breq .L127
 1584 07dc 8FEF      		ldi r24,lo8(-1)
 1585 07de 9FEF      		ldi r25,hi8(-1)
 1586 07e0 0895      		ret
 1587               	.L127:
 1588 07e2 8CE2      		ldi r24,lo8(44)
 1589 07e4 0E94 0000 		call nrk_gpio_toggle
 1590 07e8 81E0      		ldi r24,lo8(1)
 1591 07ea 90E0      		ldi r25,hi8(1)
 405:../../../src/platform/firefly2_2/source/ulib.c **** return -1;
 406:../../../src/platform/firefly2_2/source/ulib.c **** }
 1593               	.LM113:
 1594 07ec 0895      		ret
 1595               	/* epilogue: frame size=0 */
 1596               	/* epilogue: noreturn */
 1597               	/* epilogue end (size=0) */
 1598               	/* function nrk_led_toggle size 30 (30) */
 1600               	.Lscope11:
 1602               		.stabd	78,0,0
 1605               	.global	nrk_led_clr
 1607               	nrk_led_clr:
 1608               		.stabd	46,0,0
 407:../../../src/platform/firefly2_2/source/ulib.c **** 
 408:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_led_clr( int led )
 409:../../../src/platform/firefly2_2/source/ulib.c **** {
 1610               	.LM114:
 1611               	.LFBB12:
 1612               	/* prologue: frame size=0 */
 1613               	/* prologue end (size=0) */
 410:../../../src/platform/firefly2_2/source/ulib.c **** if(led==0) { nrk_gpio_set(NRK_LED_0); return 1; }
 1615               	.LM115:
 1616 07ee 0097      		sbiw r24,0
 1617 07f0 01F4      		brne .L132
 1619               	.LM116:
 1620 07f2 84E1      		ldi r24,lo8(20)
 1621 07f4 00C0      		rjmp .L142
 1622               	.L132:
 411:../../../src/platform/firefly2_2/source/ulib.c **** if(led==1) { nrk_gpio_set(NRK_LED_1); return 1; }
 1624               	.LM117:
 1625 07f6 8130      		cpi r24,1
 1626 07f8 9105      		cpc r25,__zero_reg__
 1627 07fa 01F4      		brne .L135
 1628 07fc 8CE1      		ldi r24,lo8(28)
 1629 07fe 00C0      		rjmp .L142
 1630               	.L135:
 412:../../../src/platform/firefly2_2/source/ulib.c **** if(led==2) { nrk_gpio_set(NRK_LED_2); return 1; }
 1632               	.LM118:
 1633 0800 8230      		cpi r24,2
 1634 0802 9105      		cpc r25,__zero_reg__
 1635 0804 01F4      		brne .L137
 1636 0806 84E2      		ldi r24,lo8(36)
 1637               	.L142:
 1638 0808 0E94 0000 		call nrk_gpio_set
 1639 080c 81E0      		ldi r24,lo8(1)
 1640 080e 90E0      		ldi r25,hi8(1)
 1641 0810 0895      		ret
 1642               	.L137:
 413:../../../src/platform/firefly2_2/source/ulib.c **** if(led==3) { nrk_gpio_set(NRK_LED_3); return 1; }
 1644               	.LM119:
 1645 0812 0397      		sbiw r24,3
 1646 0814 01F0      		breq .L139
 1647 0816 8FEF      		ldi r24,lo8(-1)
 1648 0818 9FEF      		ldi r25,hi8(-1)
 1649 081a 0895      		ret
 1650               	.L139:
 1651 081c 8CE2      		ldi r24,lo8(44)
 1652 081e 0E94 0000 		call nrk_gpio_set
 1653 0822 81E0      		ldi r24,lo8(1)
 1654 0824 90E0      		ldi r25,hi8(1)
 414:../../../src/platform/firefly2_2/source/ulib.c **** return -1;
 415:../../../src/platform/firefly2_2/source/ulib.c **** }
 1656               	.LM120:
 1657 0826 0895      		ret
 1658               	/* epilogue: frame size=0 */
 1659               	/* epilogue: noreturn */
 1660               	/* epilogue end (size=0) */
 1661               	/* function nrk_led_clr size 30 (30) */
 1663               	.Lscope12:
 1665               		.stabd	78,0,0
 1668               	.global	nrk_led_set
 1670               	nrk_led_set:
 1671               		.stabd	46,0,0
 416:../../../src/platform/firefly2_2/source/ulib.c **** 
 417:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_led_set( int led )
 418:../../../src/platform/firefly2_2/source/ulib.c **** {
 1673               	.LM121:
 1674               	.LFBB13:
 1675               	/* prologue: frame size=0 */
 1676               	/* prologue end (size=0) */
 419:../../../src/platform/firefly2_2/source/ulib.c **** if(led==0) { nrk_gpio_clr(NRK_LED_0); return 1; }
 1678               	.LM122:
 1679 0828 0097      		sbiw r24,0
 1680 082a 01F4      		brne .L144
 1682               	.LM123:
 1683 082c 84E1      		ldi r24,lo8(20)
 1684 082e 00C0      		rjmp .L154
 1685               	.L144:
 420:../../../src/platform/firefly2_2/source/ulib.c **** if(led==1) { nrk_gpio_clr(NRK_LED_1); return 1; }
 1687               	.LM124:
 1688 0830 8130      		cpi r24,1
 1689 0832 9105      		cpc r25,__zero_reg__
 1690 0834 01F4      		brne .L147
 1691 0836 8CE1      		ldi r24,lo8(28)
 1692 0838 00C0      		rjmp .L154
 1693               	.L147:
 421:../../../src/platform/firefly2_2/source/ulib.c **** if(led==2) { nrk_gpio_clr(NRK_LED_2); return 1; }
 1695               	.LM125:
 1696 083a 8230      		cpi r24,2
 1697 083c 9105      		cpc r25,__zero_reg__
 1698 083e 01F4      		brne .L149
 1699 0840 84E2      		ldi r24,lo8(36)
 1700               	.L154:
 1701 0842 0E94 0000 		call nrk_gpio_clr
 1702 0846 81E0      		ldi r24,lo8(1)
 1703 0848 90E0      		ldi r25,hi8(1)
 1704 084a 0895      		ret
 1705               	.L149:
 422:../../../src/platform/firefly2_2/source/ulib.c **** if(led==3) { nrk_gpio_clr(NRK_LED_3); return 1; }
 1707               	.LM126:
 1708 084c 0397      		sbiw r24,3
 1709 084e 01F0      		breq .L151
 1710 0850 8FEF      		ldi r24,lo8(-1)
 1711 0852 9FEF      		ldi r25,hi8(-1)
 1712 0854 0895      		ret
 1713               	.L151:
 1714 0856 8CE2      		ldi r24,lo8(44)
 1715 0858 0E94 0000 		call nrk_gpio_clr
 1716 085c 81E0      		ldi r24,lo8(1)
 1717 085e 90E0      		ldi r25,hi8(1)
 423:../../../src/platform/firefly2_2/source/ulib.c **** return -1;
 424:../../../src/platform/firefly2_2/source/ulib.c **** }
 1719               	.LM127:
 1720 0860 0895      		ret
 1721               	/* epilogue: frame size=0 */
 1722               	/* epilogue: noreturn */
 1723               	/* epilogue end (size=0) */
 1724               	/* function nrk_led_set size 30 (30) */
 1726               	.Lscope13:
 1728               		.stabd	78,0,0
 1731               	.global	nrk_gpio_pullups
 1733               	nrk_gpio_pullups:
 1734               		.stabd	46,0,0
 425:../../../src/platform/firefly2_2/source/ulib.c **** 
 426:../../../src/platform/firefly2_2/source/ulib.c **** int8_t nrk_gpio_pullups(uint8_t enable)
 427:../../../src/platform/firefly2_2/source/ulib.c **** {
 1736               	.LM128:
 1737               	.LFBB14:
 1738               	/* prologue: frame size=0 */
 1739               	/* prologue end (size=0) */
 428:../../../src/platform/firefly2_2/source/ulib.c **** if(enable) MCUCR &= ~BM(PUD);
 1741               	.LM129:
 1742 0862 8823      		tst r24
 1743 0864 01F0      		breq .L156
 1745               	.LM130:
 1746 0866 85B7      		in r24,85-0x20
 1747 0868 8F7E      		andi r24,lo8(-17)
 1748 086a 00C0      		rjmp .L160
 1749               	.L156:
 429:../../../src/platform/firefly2_2/source/ulib.c **** else MCUCR |= BM(PUD);
 1751               	.LM131:
 1752 086c 85B7      		in r24,85-0x20
 1753 086e 8061      		ori r24,lo8(16)
 1754               	.L160:
 1755 0870 85BF      		out 85-0x20,r24
 430:../../../src/platform/firefly2_2/source/ulib.c **** return NRK_OK;
 431:../../../src/platform/firefly2_2/source/ulib.c **** }
 1757               	.LM132:
 1758 0872 81E0      		ldi r24,lo8(1)
 1759 0874 90E0      		ldi r25,hi8(1)
 1760               	/* epilogue: frame size=0 */
 1761 0876 0895      		ret
 1762               	/* epilogue end (size=1) */
 1763               	/* function nrk_gpio_pullups size 11 (10) */
 1765               	.Lscope14:
 1767               		.stabd	78,0,0
 1770               	.global	putc0
 1772               	putc0:
 1773               		.stabd	46,0,0
 432:../../../src/platform/firefly2_2/source/ulib.c **** 
 433:../../../src/platform/firefly2_2/source/ulib.c **** 
 434:../../../src/platform/firefly2_2/source/ulib.c **** /*
 435:../../../src/platform/firefly2_2/source/ulib.c **** void IO_SET_E(uint8_t pin)
 436:../../../src/platform/firefly2_2/source/ulib.c **** {
 437:../../../src/platform/firefly2_2/source/ulib.c **** PORTE |= BM(pin);
 438:../../../src/platform/firefly2_2/source/ulib.c **** }
 439:../../../src/platform/firefly2_2/source/ulib.c **** 
 440:../../../src/platform/firefly2_2/source/ulib.c **** void IO_CLR_E(uint8_t pin)
 441:../../../src/platform/firefly2_2/source/ulib.c **** {
 442:../../../src/platform/firefly2_2/source/ulib.c **** PORTE &= ~BM(pin);
 443:../../../src/platform/firefly2_2/source/ulib.c **** }
 444:../../../src/platform/firefly2_2/source/ulib.c **** 
 445:../../../src/platform/firefly2_2/source/ulib.c **** void IO_SET_F(uint8_t pin)
 446:../../../src/platform/firefly2_2/source/ulib.c **** {
 447:../../../src/platform/firefly2_2/source/ulib.c **** PORTF |= BM(pin);
 448:../../../src/platform/firefly2_2/source/ulib.c **** }
 449:../../../src/platform/firefly2_2/source/ulib.c **** 
 450:../../../src/platform/firefly2_2/source/ulib.c **** void IO_CLR_F(uint8_t pin)
 451:../../../src/platform/firefly2_2/source/ulib.c **** {
 452:../../../src/platform/firefly2_2/source/ulib.c **** PORTF &= ~BM(pin);
 453:../../../src/platform/firefly2_2/source/ulib.c **** }
 454:../../../src/platform/firefly2_2/source/ulib.c **** */
 455:../../../src/platform/firefly2_2/source/ulib.c **** 
 456:../../../src/platform/firefly2_2/source/ulib.c **** void putc0(char x)
 457:../../../src/platform/firefly2_2/source/ulib.c **** {
 1775               	.LM133:
 1776               	.LFBB15:
 1777               	/* prologue: frame size=0 */
 1778               	/* prologue end (size=0) */
 1779 0878 982F      		mov r25,r24
 1780               	.L163:
 458:../../../src/platform/firefly2_2/source/ulib.c ****      UART0_WAIT_AND_SEND(x);
 1782               	.LM134:
 1783 087a 8091 C000 		lds r24,192
 1784 087e 85FF      		sbrs r24,5
 1785 0880 00C0      		rjmp .L163
 1786 0882 8091 C000 		lds r24,192
 1787 0886 8F7D      		andi r24,lo8(-33)
 1788 0888 8093 C000 		sts 192,r24
 1789 088c 9093 C600 		sts 198,r25
 1790               	/* epilogue: frame size=0 */
 1791 0890 0895      		ret
 1792               	/* epilogue end (size=1) */
 1793               	/* function putc0 size 13 (12) */
 1795               	.Lscope15:
 1797               		.stabd	78,0,0
 1800               	.global	putc1
 1802               	putc1:
 1803               		.stabd	46,0,0
 459:../../../src/platform/firefly2_2/source/ulib.c **** }
 460:../../../src/platform/firefly2_2/source/ulib.c **** 
 461:../../../src/platform/firefly2_2/source/ulib.c **** void putc1(char x)
 462:../../../src/platform/firefly2_2/source/ulib.c **** {
 1805               	.LM135:
 1806               	.LFBB16:
 1807               	/* prologue: frame size=0 */
 1808               	/* prologue end (size=0) */
 1809 0892 982F      		mov r25,r24
 1810               	.L170:
 463:../../../src/platform/firefly2_2/source/ulib.c ****      UART1_WAIT_AND_SEND(x);
 1812               	.LM136:
 1813 0894 8091 C800 		lds r24,200
 1814 0898 85FF      		sbrs r24,5
 1815 089a 00C0      		rjmp .L170
 1816 089c 9093 CE00 		sts 206,r25
 1817               	/* epilogue: frame size=0 */
 1818 08a0 0895      		ret
 1819               	/* epilogue end (size=1) */
 1820               	/* function putc1 size 8 (7) */
 1822               	.Lscope16:
 1824               		.stabd	78,0,0
 1827               	.global	setup_uart0
 1829               	setup_uart0:
 1830               		.stabd	46,0,0
 464:../../../src/platform/firefly2_2/source/ulib.c **** }
 465:../../../src/platform/firefly2_2/source/ulib.c **** 
 466:../../../src/platform/firefly2_2/source/ulib.c **** void setup_uart0(uint16_t baudrate)
 467:../../../src/platform/firefly2_2/source/ulib.c **** {
 1832               	.LM137:
 1833               	.LFBB17:
 1834               	/* prologue: frame size=0 */
 1835               	/* prologue end (size=0) */
 468:../../../src/platform/firefly2_2/source/ulib.c **** //INIT_UART1( UART_BAUDRATE_115K2, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_B
 469:../../../src/platform/firefly2_2/source/ulib.c **** INIT_UART0( baudrate, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_BIT));
 1837               	.LM138:
 1838 08a2 292F      		mov r18,r25
 1839 08a4 3327      		clr r19
 1840 08a6 2093 C500 		sts 197,r18
 1841 08aa 8093 C400 		sts 196,r24
 1842 08ae 86E0      		ldi r24,lo8(6)
 1843 08b0 8093 C200 		sts 194,r24
 1844 08b4 E1EC      		ldi r30,lo8(193)
 1845 08b6 F0E0      		ldi r31,hi8(193)
 1846 08b8 8081      		ld r24,Z
 1847 08ba 8B7F      		andi r24,lo8(-5)
 1848 08bc 8083      		st Z,r24
 1849 08be A0EC      		ldi r26,lo8(192)
 1850 08c0 B0E0      		ldi r27,hi8(192)
 1851 08c2 8C91      		ld r24,X
 1852 08c4 8260      		ori r24,lo8(2)
 1853 08c6 8C93      		st X,r24
 470:../../../src/platform/firefly2_2/source/ulib.c **** ENABLE_UART0();
 1855               	.LM139:
 1856 08c8 8081      		ld r24,Z
 1857 08ca 8861      		ori r24,lo8(24)
 1858 08cc 8083      		st Z,r24
 1859               	/* epilogue: frame size=0 */
 1860 08ce 0895      		ret
 1861               	/* epilogue end (size=1) */
 1862               	/* function setup_uart0 size 23 (22) */
 1864               	.Lscope17:
 1866               		.stabd	78,0,0
 1869               	.global	setup_uart1
 1871               	setup_uart1:
 1872               		.stabd	46,0,0
 471:../../../src/platform/firefly2_2/source/ulib.c **** }
 472:../../../src/platform/firefly2_2/source/ulib.c **** 
 473:../../../src/platform/firefly2_2/source/ulib.c **** void setup_uart1(uint16_t baudrate)
 474:../../../src/platform/firefly2_2/source/ulib.c **** {
 1874               	.LM140:
 1875               	.LFBB18:
 1876               	/* prologue: frame size=0 */
 1877               	/* prologue end (size=0) */
 475:../../../src/platform/firefly2_2/source/ulib.c **** //INIT_UART1( UART_BAUDRATE_115K2, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_B
 476:../../../src/platform/firefly2_2/source/ulib.c **** INIT_UART1( baudrate, (UART_OPT_NO_PARITY|UART_OPT_8_BITS_PER_CHAR|UART_OPT_ONE_STOP_BIT));
 1879               	.LM141:
 1880 08d0 292F      		mov r18,r25
 1881 08d2 3327      		clr r19
 1882 08d4 2093 CD00 		sts 205,r18
 1883 08d8 8093 CC00 		sts 204,r24
 1884 08dc 86E0      		ldi r24,lo8(6)
 1885 08de 8093 CA00 		sts 202,r24
 1886 08e2 E9EC      		ldi r30,lo8(201)
 1887 08e4 F0E0      		ldi r31,hi8(201)
 1888 08e6 8081      		ld r24,Z
 1889 08e8 8B7F      		andi r24,lo8(-5)
 1890 08ea 8083      		st Z,r24
 1891 08ec A8EC      		ldi r26,lo8(200)
 1892 08ee B0E0      		ldi r27,hi8(200)
 1893 08f0 8C91      		ld r24,X
 1894 08f2 8260      		ori r24,lo8(2)
 1895 08f4 8C93      		st X,r24
 477:../../../src/platform/firefly2_2/source/ulib.c **** ENABLE_UART1();
 1897               	.LM142:
 1898 08f6 8081      		ld r24,Z
 1899 08f8 8861      		ori r24,lo8(24)
 1900 08fa 8083      		st Z,r24
 1901               	/* epilogue: frame size=0 */
 1902 08fc 0895      		ret
 1903               	/* epilogue end (size=1) */
 1904               	/* function setup_uart1 size 23 (22) */
 1906               	.Lscope18:
 1908               		.stabd	78,0,0
 1910               	.global	getc0
 1912               	getc0:
 1913               		.stabd	46,0,0
 478:../../../src/platform/firefly2_2/source/ulib.c **** }
 479:../../../src/platform/firefly2_2/source/ulib.c **** 
 480:../../../src/platform/firefly2_2/source/ulib.c **** 
 481:../../../src/platform/firefly2_2/source/ulib.c **** 
 482:../../../src/platform/firefly2_2/source/ulib.c **** /**
 483:../../../src/platform/firefly2_2/source/ulib.c ****  * nrk_setup_uart()
 484:../../../src/platform/firefly2_2/source/ulib.c ****  *
 485:../../../src/platform/firefly2_2/source/ulib.c ****  * Sets a default uart for a given platform and
 486:../../../src/platform/firefly2_2/source/ulib.c ****  * direct stdin and stdout to that port.
 487:../../../src/platform/firefly2_2/source/ulib.c ****  *
 488:../../../src/platform/firefly2_2/source/ulib.c ****  * More advanced UART usage will require manually
 489:../../../src/platform/firefly2_2/source/ulib.c ****  * setting parameters.
 490:../../../src/platform/firefly2_2/source/ulib.c ****  */
 491:../../../src/platform/firefly2_2/source/ulib.c **** void nrk_setup_uart(uint16_t baudrate)
 492:../../../src/platform/firefly2_2/source/ulib.c **** {
 493:../../../src/platform/firefly2_2/source/ulib.c **** 
 494:../../../src/platform/firefly2_2/source/ulib.c ****   setup_uart1(baudrate);
 495:../../../src/platform/firefly2_2/source/ulib.c ****   //setup_uart0(baudrate);
 496:../../../src/platform/firefly2_2/source/ulib.c **** 
 497:../../../src/platform/firefly2_2/source/ulib.c ****   stdout = fdevopen( (void *)putc1, (void *)getc1);
 498:../../../src/platform/firefly2_2/source/ulib.c ****   stdin = fdevopen( (void *)putc1, (void *)getc1);
 499:../../../src/platform/firefly2_2/source/ulib.c **** 
 500:../../../src/platform/firefly2_2/source/ulib.c **** #ifdef NRK_UART_BUF
 501:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_signal=nrk_signal_create();
 502:../../../src/platform/firefly2_2/source/ulib.c ****    if(uart_rx_signal==NRK_ERROR) nrk_error_add(NRK_SIGNAL_CREATE_ERROR);
 503:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_buf_start=0;
 504:../../../src/platform/firefly2_2/source/ulib.c ****    uart_rx_buf_end=0;
 505:../../../src/platform/firefly2_2/source/ulib.c ****    ENABLE_UART1_RX_INT();
 506:../../../src/platform/firefly2_2/source/ulib.c **** #endif
 507:../../../src/platform/firefly2_2/source/ulib.c **** 
 508:../../../src/platform/firefly2_2/source/ulib.c **** }
 509:../../../src/platform/firefly2_2/source/ulib.c **** 
 510:../../../src/platform/firefly2_2/source/ulib.c **** 
 511:../../../src/platform/firefly2_2/source/ulib.c **** 
 512:../../../src/platform/firefly2_2/source/ulib.c **** /* get one char from uart */
 513:../../../src/platform/firefly2_2/source/ulib.c **** char getc0(void){
 1915               	.LM143:
 1916               	.LFBB19:
 1917               	/* prologue: frame size=0 */
 1918               	/* prologue end (size=0) */
 1919               	.L181:
 514:../../../src/platform/firefly2_2/source/ulib.c **** 	unsigned char tmp;
 515:../../../src/platform/firefly2_2/source/ulib.c **** 	UART0_WAIT_AND_RECEIVE(tmp);
 1921               	.LM144:
 1922 08fe 8091 C000 		lds r24,192
 1923 0902 87FF      		sbrs r24,7
 1924 0904 00C0      		rjmp .L181
 1926               	.LM145:
 1927 0906 8091 C000 		lds r24,192
 1928 090a 8F77      		andi r24,lo8(127)
 1929 090c 8093 C000 		sts 192,r24
 1930 0910 8091 C600 		lds r24,198
 516:../../../src/platform/firefly2_2/source/ulib.c **** 	return tmp;
 517:../../../src/platform/firefly2_2/source/ulib.c **** }
 1932               	.LM146:
 1933 0914 9927      		clr r25
 1934               	/* epilogue: frame size=0 */
 1935 0916 0895      		ret
 1936               	/* epilogue end (size=1) */
 1937               	/* function getc0 size 13 (12) */
 1942               	.Lscope19:
 1944               		.stabd	78,0,0
 1947               	.global	nrk_setup_uart
 1949               	nrk_setup_uart:
 1950               		.stabd	46,0,0
 1952               	.LM147:
 1953               	.LFBB20:
 1954               	/* prologue: frame size=0 */
 1955               	/* prologue end (size=0) */
 1957               	.LM148:
 1958 0918 0E94 0000 		call setup_uart1
 1960               	.LM149:
 1961 091c 60E0      		ldi r22,lo8(pm(getc1))
 1962 091e 70E0      		ldi r23,hi8(pm(getc1))
 1963 0920 80E0      		ldi r24,lo8(pm(putc1))
 1964 0922 90E0      		ldi r25,hi8(pm(putc1))
 1965 0924 0E94 0000 		call fdevopen
 1966 0928 9093 0000 		sts (__iob+2)+1,r25
 1967 092c 8093 0000 		sts __iob+2,r24
 1969               	.LM150:
 1970 0930 60E0      		ldi r22,lo8(pm(getc1))
 1971 0932 70E0      		ldi r23,hi8(pm(getc1))
 1972 0934 80E0      		ldi r24,lo8(pm(putc1))
 1973 0936 90E0      		ldi r25,hi8(pm(putc1))
 1974 0938 0E94 0000 		call fdevopen
 1975 093c 9093 0000 		sts (__iob)+1,r25
 1976 0940 8093 0000 		sts __iob,r24
 1978               	.LM151:
 1979 0944 0E94 0000 		call nrk_signal_create
 1980 0948 8093 0000 		sts uart_rx_signal,r24
 1982               	.LM152:
 1983 094c 8F3F      		cpi r24,lo8(-1)
 1984 094e 01F4      		brne .L187
 1986               	.LM153:
 1987 0950 8EE0      		ldi r24,lo8(14)
 1988 0952 0E94 0000 		call nrk_error_add
 1989               	.L187:
 1991               	.LM154:
 1992 0956 1092 0000 		sts uart_rx_buf_start,__zero_reg__
 1994               	.LM155:
 1995 095a 1092 0000 		sts uart_rx_buf_end,__zero_reg__
 1997               	.LM156:
 1998 095e 8091 C900 		lds r24,201
 1999 0962 8068      		ori r24,lo8(-128)
 2000 0964 8093 C900 		sts 201,r24
 2001               	/* epilogue: frame size=0 */
 2002 0968 0895      		ret
 2003               	/* epilogue end (size=1) */
 2004               	/* function nrk_setup_uart size 41 (40) */
 2006               	.Lscope20:
 2008               		.stabd	78,0,0
 2010               	.global	nrk_uart_rx_signal_get
 2012               	nrk_uart_rx_signal_get:
 2013               		.stabd	46,0,0
 2015               	.LM157:
 2016               	.LFBB21:
 2017               	/* prologue: frame size=0 */
 2018               	/* prologue end (size=0) */
 2020               	.LM158:
 2021 096a 8091 0000 		lds r24,uart_rx_signal
 2022 096e 8F3F      		cpi r24,lo8(-1)
 2023 0970 01F4      		brne .L191
 2025               	.LM159:
 2026 0972 8EE0      		ldi r24,lo8(14)
 2027 0974 0E94 0000 		call nrk_error_add
 2028               	.L191:
 2029 0978 8091 0000 		lds r24,uart_rx_signal
 2031               	.LM160:
 2032 097c 9927      		clr r25
 2033 097e 87FD      		sbrc r24,7
 2034 0980 9095      		com r25
 2035               	/* epilogue: frame size=0 */
 2036 0982 0895      		ret
 2037               	/* epilogue end (size=1) */
 2038               	/* function nrk_uart_rx_signal_get size 13 (12) */
 2040               	.Lscope21:
 2042               		.stabd	78,0,0
 2045               	.global	nrk_kprintf
 2047               	nrk_kprintf:
 2048               		.stabd	46,0,0
 2050               	.LM161:
 2051               	.LFBB22:
 2052               	/* prologue: frame size=0 */
 2053 0984 CF93      		push r28
 2054 0986 DF93      		push r29
 2055               	/* prologue end (size=2) */
 2056 0988 EC01      		movw r28,r24
 2057 098a 00C0      		rjmp .L195
 2058               	.L196:
 2060               	.LM162:
 2061 098c 6091 0000 		lds r22,__iob+2
 2062 0990 7091 0000 		lds r23,(__iob+2)+1
 2063 0994 9927      		clr r25
 2064 0996 0E94 0000 		call fputc
 2065               	.L195:
 2066 099a FE01      		movw r30,r28
 2067               	.LBB2:
 2069               	.LM163:
 2070 099c 2196      		adiw r28,1
 2071               	/* #APP */
 2072 099e 8491      		lpm r24, Z
 2073               		
 2074               	/* #NOAPP */
 2075               	.LBE2:
 2076 09a0 8823      		tst r24
 2077 09a2 01F4      		brne .L196
 2078               	/* epilogue: frame size=0 */
 2079 09a4 DF91      		pop r29
 2080 09a6 CF91      		pop r28
 2081 09a8 0895      		ret
 2082               	/* epilogue end (size=3) */
 2083               	/* function nrk_kprintf size 22 (17) */
 2089               	.Lscope22:
 2091               		.stabd	78,0,0
 2093               	.global	__vector_36
 2095               	__vector_36:
 2096               		.stabd	46,0,0
 2098               	.LM164:
 2099               	.LFBB23:
 2100               	/* prologue: frame size=0 */
 2101 09aa 1F92      		push __zero_reg__
 2102 09ac 0F92      		push __tmp_reg__
 2103 09ae 0FB6      		in __tmp_reg__,__SREG__
 2104 09b0 0F92      		push __tmp_reg__
 2105 09b2 1124      		clr __zero_reg__
 2106 09b4 2F93      		push r18
 2107 09b6 3F93      		push r19
 2108 09b8 4F93      		push r20
 2109 09ba 5F93      		push r21
 2110 09bc 6F93      		push r22
 2111 09be 7F93      		push r23
 2112 09c0 8F93      		push r24
 2113 09c2 9F93      		push r25
 2114 09c4 AF93      		push r26
 2115 09c6 BF93      		push r27
 2116 09c8 EF93      		push r30
 2117 09ca FF93      		push r31
 2118               	/* prologue end (size=17) */
 2120               	.LM165:
 2121 09cc 8091 C900 		lds r24,201
 2122 09d0 8F77      		andi r24,lo8(127)
 2123 09d2 8093 C900 		sts 201,r24
 2124               	.L200:
 2126               	.LM166:
 2127 09d6 8091 C800 		lds r24,200
 2128 09da 87FF      		sbrs r24,7
 2129 09dc 00C0      		rjmp .L200
 2130 09de 8091 C800 		lds r24,200
 2131 09e2 8F77      		andi r24,lo8(127)
 2132 09e4 8093 C800 		sts 200,r24
 2133 09e8 9091 CE00 		lds r25,206
 2135               	.LM167:
 2136 09ec 8091 0000 		lds r24,uart_rx_buf_end
 2137 09f0 E82F      		mov r30,r24
 2138 09f2 FF27      		clr r31
 2139 09f4 E050      		subi r30,lo8(-(uart_rx_buf))
 2140 09f6 F040      		sbci r31,hi8(-(uart_rx_buf))
 2141 09f8 9083      		st Z,r25
 2143               	.LM168:
 2144 09fa 8F5F      		subi r24,lo8(-(1))
 2145 09fc 8093 0000 		sts uart_rx_buf_end,r24
 2147               	.LM169:
 2148 0a00 8031      		cpi r24,lo8(16)
 2149 0a02 01F4      		brne .L202
 2150 0a04 1092 0000 		sts uart_rx_buf_end,__zero_reg__
 2151               	.L202:
 2153               	.LM170:
 2154 0a08 8091 0000 		lds r24,uart_rx_signal
 2155 0a0c 0E94 0000 		call nrk_event_signal
 2157               	.LM171:
 2158 0a10 8091 C800 		lds r24,200
 2159 0a14 8F77      		andi r24,lo8(127)
 2160 0a16 8093 C800 		sts 200,r24
 2162               	.LM172:
 2163 0a1a 8091 C900 		lds r24,201
 2164 0a1e 8068      		ori r24,lo8(-128)
 2165 0a20 8093 C900 		sts 201,r24
 2166               	/* epilogue: frame size=0 */
 2167 0a24 FF91      		pop r31
 2168 0a26 EF91      		pop r30
 2169 0a28 BF91      		pop r27
 2170 0a2a AF91      		pop r26
 2171 0a2c 9F91      		pop r25
 2172 0a2e 8F91      		pop r24
 2173 0a30 7F91      		pop r23
 2174 0a32 6F91      		pop r22
 2175 0a34 5F91      		pop r21
 2176 0a36 4F91      		pop r20
 2177 0a38 3F91      		pop r19
 2178 0a3a 2F91      		pop r18
 2179 0a3c 0F90      		pop __tmp_reg__
 2180 0a3e 0FBE      		out __SREG__,__tmp_reg__
 2181 0a40 0F90      		pop __tmp_reg__
 2182 0a42 1F90      		pop __zero_reg__
 2183 0a44 1895      		reti
 2184               	/* epilogue end (size=17) */
 2185               	/* function __vector_36 size 78 (44) */
 2190               	.Lscope23:
 2192               		.stabd	78,0,0
 2193               	.global	NRK_DEBUG_0
 2194               		.data
 2197               	NRK_DEBUG_0:
 2198 0000 18        		.byte	24
 2199               	.global	NRK_DEBUG_1
 2202               	NRK_DEBUG_1:
 2203 0001 20        		.byte	32
 2204               	.global	NRK_BUTTON
 2207               	NRK_BUTTON:
 2208 0002 38        		.byte	56
 2209               	.global	NRK_SPI_SS
 2212               	NRK_SPI_SS:
 2213 0003 01        		.byte	1
 2214               	.global	NRK_SCK
 2217               	NRK_SCK:
 2218 0004 09        		.byte	9
 2219               	.global	NRK_MOSI
 2222               	NRK_MOSI:
 2223 0005 11        		.byte	17
 2224               	.global	NRK_MISO
 2227               	NRK_MISO:
 2228 0006 19        		.byte	25
 2229               	.global	NRK_GPIO26
 2232               	NRK_GPIO26:
 2233 0007 21        		.byte	33
 2234               	.global	NRK_MMC_11
 2237               	NRK_MMC_11:
 2238 0008 29        		.byte	41
 2239               	.global	NRK_MMC_10
 2242               	NRK_MMC_10:
 2243 0009 31        		.byte	49
 2244               	.global	NRK_MMC_9
 2247               	NRK_MMC_9:
 2248 000a 39        		.byte	57
 2249               	.global	NRK_DEBUG_2
 2252               	NRK_DEBUG_2:
 2253 000b 03        		.byte	3
 2254               	.global	NRK_DEBUG_3
 2257               	NRK_DEBUG_3:
 2258 000c 0B        		.byte	11
 2259               	.global	NRK_UART1_RXD
 2262               	NRK_UART1_RXD:
 2263 000d 13        		.byte	19
 2264               	.global	NRK_UART1_TXD
 2267               	NRK_UART1_TXD:
 2268 000e 1B        		.byte	27
 2269               	.global	NRK_CCA
 2272               	NRK_CCA:
 2273 000f 23        		.byte	35
 2274               	.global	NRK_SFD
 2277               	NRK_SFD:
 2278 0010 33        		.byte	51
 2279               	.global	NRK_UART0_RXD
 2282               	NRK_UART0_RXD:
 2283 0011 04        		.byte	4
 2284               	.global	NRK_UART0_TXD
 2287               	NRK_UART0_TXD:
 2288 0012 0C        		.byte	12
 2289               	.global	NRK_LED_0
 2292               	NRK_LED_0:
 2293 0013 14        		.byte	20
 2294               	.global	NRK_LED_1
 2297               	NRK_LED_1:
 2298 0014 1C        		.byte	28
 2299               	.global	NRK_LED_2
 2302               	NRK_LED_2:
 2303 0015 24        		.byte	36
 2304               	.global	NRK_LED_3
 2307               	NRK_LED_3:
 2308 0016 2C        		.byte	44
 2309               	.global	NRK_GPIO34
 2312               	NRK_GPIO34:
 2313 0017 34        		.byte	52
 2314               	.global	NRK_FIFOP
 2317               	NRK_FIFOP:
 2318 0018 3C        		.byte	60
 2319               	.global	NRK_ADC_INPUT_0
 2322               	NRK_ADC_INPUT_0:
 2323 0019 05        		.byte	5
 2324               	.global	NRK_ADC_INPUT_1
 2327               	NRK_ADC_INPUT_1:
 2328 001a 0D        		.byte	13
 2329               	.global	NRK_ADC_INPUT_2
 2332               	NRK_ADC_INPUT_2:
 2333 001b 15        		.byte	21
 2334               	.global	NRK_ADC_INPUT_3
 2337               	NRK_ADC_INPUT_3:
 2338 001c 1D        		.byte	29
 2339               	.global	NRK_ADC_INPUT_4
 2342               	NRK_ADC_INPUT_4:
 2343 001d 25        		.byte	37
 2344               	.global	NRK_ADC_INPUT_5
 2347               	NRK_ADC_INPUT_5:
 2348 001e 2D        		.byte	45
 2349               	.global	NRK_ADC_INPUT_6
 2352               	NRK_ADC_INPUT_6:
 2353 001f 35        		.byte	53
 2354               	.global	NRK_ADC_INPUT_7
 2357               	NRK_ADC_INPUT_7:
 2358 0020 3D        		.byte	61
 2359               		.comm _nrk_signal_list,4,1
 2360               		.comm error_task,1,1
 2361               		.comm error_num,1,1
 2362               		.comm uart_rx_buf_start,1,1
 2363               		.comm uart_rx_buf_end,1,1
 2364               		.comm uart_rx_buf,16,1
 2365               		.comm uart_rx_signal,1,1
 2406               		.text
 2408               	.Letext0:
 2409               	/* File "../../../src/platform/firefly2_2/source/ulib.c": code 1360 = 0x0550 (1311), prologues  19,
DEFINED SYMBOLS
                            *ABS*:00000000 ulib.c
     /tmp/ccGQQalp.s:2      *ABS*:0000003f __SREG__
     /tmp/ccGQQalp.s:3      *ABS*:0000003e __SP_H__
     /tmp/ccGQQalp.s:4      *ABS*:0000003d __SP_L__
     /tmp/ccGQQalp.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccGQQalp.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccGQQalp.s:119    .text:00000000 getc1
                            *COM*:00000001 uart_rx_buf_start
                            *COM*:00000001 uart_rx_buf_end
                            *COM*:00000010 uart_rx_buf
     /tmp/ccGQQalp.s:186    .text:00000046 nrk_uart_data_ready
     /tmp/ccGQQalp.s:241    .text:00000080 PORT_INIT
     /tmp/ccGQQalp.s:303    .text:000000ae nrk_setup_ports
     /tmp/ccGQQalp.s:331    .text:000000bc nrk_gpio_set
     /tmp/ccGQQalp.s:510    .text:000001c6 nrk_gpio_clr
     /tmp/ccGQQalp.s:696    .text:000002de nrk_gpio_get
     /tmp/ccGQQalp.s:800    .text:00000352 nrk_gpio_toggle
     /tmp/ccGQQalp.s:1143   .text:00000564 nrk_gpio_direction
     /tmp/ccGQQalp.s:1500   .text:00000794 nrk_get_button
     /tmp/ccGQQalp.s:1544   .text:000007b4 nrk_led_toggle
     /tmp/ccGQQalp.s:1607   .text:000007ee nrk_led_clr
     /tmp/ccGQQalp.s:1670   .text:00000828 nrk_led_set
     /tmp/ccGQQalp.s:1733   .text:00000862 nrk_gpio_pullups
     /tmp/ccGQQalp.s:1772   .text:00000878 putc0
     /tmp/ccGQQalp.s:1802   .text:00000892 putc1
     /tmp/ccGQQalp.s:1829   .text:000008a2 setup_uart0
     /tmp/ccGQQalp.s:1871   .text:000008d0 setup_uart1
     /tmp/ccGQQalp.s:1912   .text:000008fe getc0
     /tmp/ccGQQalp.s:1949   .text:00000918 nrk_setup_uart
                            *COM*:00000001 uart_rx_signal
     /tmp/ccGQQalp.s:2012   .text:0000096a nrk_uart_rx_signal_get
     /tmp/ccGQQalp.s:2047   .text:00000984 nrk_kprintf
     /tmp/ccGQQalp.s:2095   .text:000009aa __vector_36
     /tmp/ccGQQalp.s:2197   .data:00000000 NRK_DEBUG_0
     /tmp/ccGQQalp.s:2202   .data:00000001 NRK_DEBUG_1
     /tmp/ccGQQalp.s:2207   .data:00000002 NRK_BUTTON
     /tmp/ccGQQalp.s:2212   .data:00000003 NRK_SPI_SS
     /tmp/ccGQQalp.s:2217   .data:00000004 NRK_SCK
     /tmp/ccGQQalp.s:2222   .data:00000005 NRK_MOSI
     /tmp/ccGQQalp.s:2227   .data:00000006 NRK_MISO
     /tmp/ccGQQalp.s:2232   .data:00000007 NRK_GPIO26
     /tmp/ccGQQalp.s:2237   .data:00000008 NRK_MMC_11
     /tmp/ccGQQalp.s:2242   .data:00000009 NRK_MMC_10
     /tmp/ccGQQalp.s:2247   .data:0000000a NRK_MMC_9
     /tmp/ccGQQalp.s:2252   .data:0000000b NRK_DEBUG_2
     /tmp/ccGQQalp.s:2257   .data:0000000c NRK_DEBUG_3
     /tmp/ccGQQalp.s:2262   .data:0000000d NRK_UART1_RXD
     /tmp/ccGQQalp.s:2267   .data:0000000e NRK_UART1_TXD
     /tmp/ccGQQalp.s:2272   .data:0000000f NRK_CCA
     /tmp/ccGQQalp.s:2277   .data:00000010 NRK_SFD
     /tmp/ccGQQalp.s:2282   .data:00000011 NRK_UART0_RXD
     /tmp/ccGQQalp.s:2287   .data:00000012 NRK_UART0_TXD
     /tmp/ccGQQalp.s:2292   .data:00000013 NRK_LED_0
     /tmp/ccGQQalp.s:2297   .data:00000014 NRK_LED_1
     /tmp/ccGQQalp.s:2302   .data:00000015 NRK_LED_2
     /tmp/ccGQQalp.s:2307   .data:00000016 NRK_LED_3
     /tmp/ccGQQalp.s:2312   .data:00000017 NRK_GPIO34
     /tmp/ccGQQalp.s:2317   .data:00000018 NRK_FIFOP
     /tmp/ccGQQalp.s:2322   .data:00000019 NRK_ADC_INPUT_0
     /tmp/ccGQQalp.s:2327   .data:0000001a NRK_ADC_INPUT_1
     /tmp/ccGQQalp.s:2332   .data:0000001b NRK_ADC_INPUT_2
     /tmp/ccGQQalp.s:2337   .data:0000001c NRK_ADC_INPUT_3
     /tmp/ccGQQalp.s:2342   .data:0000001d NRK_ADC_INPUT_4
     /tmp/ccGQQalp.s:2347   .data:0000001e NRK_ADC_INPUT_5
     /tmp/ccGQQalp.s:2352   .data:0000001f NRK_ADC_INPUT_6
     /tmp/ccGQQalp.s:2357   .data:00000020 NRK_ADC_INPUT_7
                            *COM*:00000004 _nrk_signal_list
                            *COM*:00000001 error_task
                            *COM*:00000001 error_num

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
fdevopen
__iob
nrk_signal_create
nrk_error_add
fputc
nrk_event_signal
